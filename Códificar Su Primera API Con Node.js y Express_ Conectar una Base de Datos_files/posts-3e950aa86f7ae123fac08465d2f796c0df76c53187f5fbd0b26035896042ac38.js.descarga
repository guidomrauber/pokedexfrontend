!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(){"use strict";function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t){var e=(getComputedStyle(t)||{}).position,n=[];if("fixed"===e)return[t];for(var i=t;i=i.parentNode;){var o=undefined;try{o=getComputedStyle(i)}catch(l){}if(null==o)return n.push(i),n;var r=o,s=r.overflow,a=r.overflowX,u=r.overflowY;/(auto|scroll)/.test(s+u+a)&&("absolute"!==e||0<=["relative","absolute","fixed"].indexOf(o.position))&&n.push(i)}return n.push(document.body),n}function x(t){var e=undefined;t===document?(e=document,t=document.documentElement):e=t.ownerDocument;var n=e.documentElement,i={},o=t.getBoundingClientRect();for(var r in o)i[r]=o[r];var s=u(e);return i.top-=s.top,i.left-=s.left,"undefined"==typeof i.width&&(i.width=document.body.scrollWidth-i.left-i.right),"undefined"==typeof i.height&&(i.height=document.body.scrollHeight-i.top-i.bottom),i.top=i.top-n.clientTop,i.left=i.left-n.clientLeft,i.right=e.body.clientWidth-i.width-i.left,i.bottom=e.body.clientHeight-i.height-i.top,i}function w(t){return t.offsetParent||document.documentElement}function S(){var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");E(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;n===i&&(i=e.clientWidth),document.body.removeChild(e);var o=n-i;return{width:o,height:o}}function E(t){var n=arguments.length<=0||t===undefined?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(t){if(t)for(var e in t)({}).hasOwnProperty.call(t,e)&&(n[e]=t[e])}),n}function p(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.remove(t)});else{var n=new RegExp("(^| )"+t.split(" ").join("|")+"( |$)","gi"),i=o(e).replace(n," ");r(e,i)}}function d(e,t){if("undefined"!=typeof e.classList)t.split(" ").forEach(function(t){t.trim()&&e.classList.add(t)});else{p(e,t);var n=o(e)+" "+t;r(e,n)}}function i(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var n=o(t);return new RegExp("(^| )"+e+"( |$)","gi").test(n)}function o(t){return t.className instanceof SVGAnimatedString?t.className.baseVal:t.className}function r(t,e){t.setAttribute("class",e)}function k(e,n,t){t.forEach(function(t){-1===n.indexOf(t)&&i(e,t)&&p(e,t)}),n.forEach(function(t){i(e,t)||d(e,t)})}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function y(t,e,n){var i=arguments.length<=2||n===undefined?1:arguments[2];return e<=t+i&&t-i<=e}function t(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function C(){for(var i={top:0,left:0},t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.forEach(function(t){var e=t.top,n=t.left;"string"==typeof e&&(e=parseFloat(e,10)),"string"==typeof n&&(n=parseFloat(n,10)),i.top+=e,i.left+=n}),i}function T(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function A(t,n){var e,i,o;return"scrollParent"===n?n=t.scrollParents[0]:"window"===n&&(n=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),n===document&&(n=n.documentElement),"undefined"!=typeof n.nodeType&&(e=x(n),i=e,o=getComputedStyle(n),n=[i.left,i.top,e.width+i.left,e.height+i.top],q.forEach(function(t,e){"Top"===(t=t[0].toUpperCase()+t.substr(1))||"Left"===t?n[e]+=parseFloat(o["border"+t+"Width"]):n[e]-=parseFloat(o["border"+t+"Width"])})),n}var f=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),I=undefined;void 0===I&&(I={modules:[]});var e,s=(e=0,function(){return++e}),a={},u=function u(t){var e=t._tetherZeroElement;void 0===e&&((e=t.createElement("div")).setAttribute("data-tether-id",s()),E(e.style,{top:0,left:0,position:"absolute"}),t.body.appendChild(e),t._tetherZeroElement=e);var n=e.getAttribute("data-tether-id");if("undefined"==typeof a[n]){a[n]={};var i=e.getBoundingClientRect();for(var o in i)a[n][o]=i[o];H(function(){delete a[n]})}return a[n]},n=[],H=function H(t){n.push(t)},O=function O(){for(var t=undefined;t=n.pop();)t()},l=function(){function t(){h(this,t)}return f(t,[{key:"on",value:function r(t,e,n,i){var o=!(arguments.length<=3||i===undefined)&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:o})}},{key:"once",value:function i(t,e,n){this.on(t,e,n,!0)}},{key:"off",value:function o(t,e){if("undefined"==typeof this.bindings||"undefined"==typeof this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var n=0;n<this.bindings[t].length;)this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):++n}},{key:"trigger",value:function c(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,n=arguments.length,i=Array(1<n?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,u=r.once,l=a;void 0===l&&(l=this),s.apply(l,i),u?this.bindings[t].splice(e,1):++e}}}}]),t}();I.Utils={getScrollParents:c,getBounds:x,getOffsetParent:w,extend:E,addClass:d,removeClass:p,hasClass:i,updateClasses:k,defer:H,flush:O,uniqueId:s,Evented:l,getScrollBarSize:S};var $=function(){function n(t,e){var n=[],i=!0,o=!1,r=undefined;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){o=!0,r=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();f=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}();if(void 0===I)throw new Error("You must include the utils.js file before tether.js");var g,m,v,b,c=(V=I.Utils).getScrollParents,w=(x=V.getBounds,V.getOffsetParent),d=(E=V.extend,V.addClass),p=V.removeClass,S=(k=V.updateClasses,H=V.defer,O=V.flush,V.getScrollBarSize),L=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","webkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var i=e[n];if(t.style[i]!==undefined)return i}}(),D=[],j=function j(){D.forEach(function(t){t.position(!1)}),O()};v=m=g=null,b=function b(){if(void 0!==m&&16<m)return m=Math.min(m-16,250),void(v=setTimeout(b,250));void 0!==g&&t()-g<10||(void 0!==v&&(clearTimeout(v),v=null),g=t(),j(),m=t()-g)},"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,b)});var _={center:"center",left:"right",right:"left"},B={middle:"middle",top:"bottom",bottom:"top"},M={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},P=function P(t,e){var n=t.left,i=t.top;return"auto"===n&&(n=_[e.left]),"auto"===i&&(i=B[e.top]),{left:n,top:i}},N=function N(t){var e=t.left,n=t.top;return"undefined"!=typeof M[t.left]&&(e=M[t.left]),"undefined"!=typeof M[t.top]&&(n=M[t.top]),{left:e,top:n}},R=function R(t){var e=t.split(" "),n=$(e,2);return{top:n[0],left:n[1]}},z=R,U=function(){function n(t){var e=this;h(this,n),this.position=this.position.bind(this),D.push(this),this.history=[],this.setOptions(t,!1),I.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(e)}),this.position()}return f(n,[{key:"getClass",value:function i(t){var e=arguments.length<=0||t===undefined?"":arguments[0],n=this.options.classes;return void 0!==n&&n[e]?this.options.classes[e]:this.options.classPrefix?this.options.classPrefix+"-"+e:e}},{key:"setOptions",value:function l(t,e){var n=this,i=arguments.length<=1||e===undefined||arguments[1],o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=E(o,t);var r=this.options,s=r.element,a=r.target,u=r.targetModifier;if(this.element=s,this.target=a,this.targetModifier=u,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof n[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof n[t].jquery?n[t]=n[t][0]:"string"==typeof n[t]&&(n[t]=document.querySelector(n[t]))}),d(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&d(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=z(this.options.targetAttachment),this.attachment=z(this.options.attachment),this.offset=R(this.options.offset),this.targetOffset=R(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=c(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function u(){if("undefined"==typeof this.targetModifier)return x(this.target);if("visible"===this.targetModifier)return this.target===document.body?{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth}:((r={height:(t=x(this.target)).height,width:t.width,top:t.top,left:t.left}).height=Math.min(r.height,t.height-(pageYOffset-t.top)),r.height=Math.min(r.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),r.height=Math.min(innerHeight,r.height),r.height-=2,r.width=Math.min(r.width,t.width-(pageXOffset-t.left)),r.width=Math.min(r.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),r.width=Math.min(innerWidth,r.width),r.width-=2,r.top<pageYOffset&&(r.top=pageYOffset),r.left<pageXOffset&&(r.left=pageXOffset),r);if("scroll-handle"===this.targetModifier){var t=undefined,e=this.target;e===document.body?(e=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=x(e);var n=getComputedStyle(e),i=0;(e.scrollWidth>e.clientWidth||0<=[n.overflow,n.overflowX].indexOf("scroll")||this.target!==document.body)&&(i=15);var o=t.height-parseFloat(n.borderTopWidth)-parseFloat(n.borderBottomWidth)-i,r={width:15,height:.975*o*(o/e.scrollHeight),left:t.left+t.width-parseFloat(n.borderLeftWidth)-15},s=0;o<408&&this.target===document.body&&(s=-11e-5*Math.pow(o,2)-.00727*o+22.58),this.target!==document.body&&(r.height=Math.max(r.height,24));var a=this.target.scrollTop/(e.scrollHeight-o);return r.top=a*(o-r.height-s)+t.top+parseFloat(n.borderTopWidth),this.target===document.body&&(r.height=Math.max(r.height,24)),r}}},{key:"clearCache",value:function t(){this._cache={}}},{key:"cache",value:function o(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function r(t){var e=this,n=arguments.length<=0||t===undefined||arguments[0];!1!==this.options.addTargetClasses&&d(this.target,this.getClass("enabled")),d(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(t){t!==document&&t.addEventListener("scroll",e.position)}),n&&this.position()}},{key:"disable",value:function s(){var e=this;p(this.target,this.getClass("enabled")),p(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.position)})}},{key:"destroy",value:function e(){var n=this;this.disable(),D.forEach(function(t,e){t!==n||D.splice(e,1)})}},{key:"updateAttachClasses",value:function a(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;t.top&&o.push(this.getClass("element-attached")+"-"+t.top),t.left&&o.push(this.getClass("element-attached")+"-"+t.left),e.top&&o.push(this.getClass("target-attached")+"-"+e.top),e.left&&o.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(n.getClass("element-attached")+"-"+t),r.push(n.getClass("target-attached")+"-"+t)}),H(function(){"undefined"!=typeof n._addAttachClasses&&(k(n.element,n._addAttachClasses,r),!1!==n.options.addTargetClasses&&k(n.target,n._addAttachClasses,r),delete n._addAttachClasses)})}},{key:"position",value:function _(t){var a=this,e=arguments.length<=0||t===undefined||arguments[0];if(this.enabled){this.clearCache();var n=P(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",function(){return x(a.element)}),o=i.width,r=i.height;if(0===o&&0===r&&"undefined"!=typeof this.lastSize){var s=this.lastSize;o=s.width,r=s.height}else this.lastSize={width:o,height:r};var u=this.cache("target-bounds",function(){return a.getTargetBounds()}),l=u,c=T(N(this.attachment),{width:o,height:r}),h=T(N(n),l),p=T(this.offset,{width:o,height:r}),d=T(this.targetOffset,l);c=C(c,p),h=C(h,d);for(var f=u.left+h.left-c.left,g=u.top+h.top-c.top,m=0;m<I.modules.length;++m){var y=I.modules[m].position.call(this,{left:f,top:g,targetAttachment:n,targetPos:u,elementPos:i,offset:c,targetOffset:h,manualOffset:p,manualTargetOffset:d,scrollbarSize:b,attachment:this.attachment});if(!1===y)return!1;void 0!==y&&"object"==typeof y&&(g=y.top,f=y.left)}var v={page:{top:g,left:f},viewport:{top:g-pageYOffset,bottom:pageYOffset-g-r+innerHeight,left:f-pageXOffset,right:pageXOffset-f-o+innerWidth}},b=undefined;return document.body.scrollWidth>window.innerWidth&&(b=this.cache("scrollbar-size",S),v.viewport.bottom-=b.height),document.body.scrollHeight>window.innerHeight&&(b=this.cache("scrollbar-size",S),v.viewport.right-=b.width),-1!==["","static"].indexOf(document.body.style.position)&&-1!==["","static"].indexOf(document.body.parentElement.style.position)||(v.page.bottom=document.body.scrollHeight-g-r,v.page.right=document.body.scrollWidth-f-o),"undefined"!=typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&"undefined"==typeof this.targetModifier&&function(){var t=a.cache("target-offsetparent",function(){return w(a.target)}),e=a.cache("target-offsetparent-bounds",function(){return x(t)}),n=getComputedStyle(t),i=e,o={};if(["Top","Left","Bottom","Right"].forEach(function(t){o[t.toLowerCase()]=parseFloat(n["border"+t+"Width"])}),e.right=document.body.scrollWidth-e.left-i.width+o.right,e.bottom=document.body.scrollHeight-e.top-i.height+o.bottom,v.page.top>=e.top+o.top&&v.page.bottom>=e.bottom&&v.page.left>=e.left+o.left&&v.page.right>=e.right){var r=t.scrollTop,s=t.scrollLeft;v.offset={top:v.page.top-e.top+r-o.top,left:v.page.left-e.left+s-o.left}}}(),this.move(v),this.history.unshift(v),3<this.history.length&&this.history.pop(),e&&O(),!0}}},{key:"move",value:function m(e){var o=this;if("undefined"!=typeof this.element.parentNode){var n={};for(var t in e)for(var i in n[t]={},e[t]){for(var r=!1,s=0;s<this.history.length;++s){var a=this.history[s];if("undefined"!=typeof a[t]&&!y(a[t][i],e[t][i])){r=!0;break}}r||(n[t][i]=!0)}var u={top:"",left:"",right:"",bottom:""},l=function l(t,e){if(!1!==("undefined"!=typeof o.options.optimizations?o.options.optimizations.gpu:null)){var n=undefined,i=undefined;t.top?(u.top=0,n=e.top):(u.bottom=0,n=-e.bottom),t.left?(u.left=0,i=e.left):(u.right=0,i=-e.right),u[L]="translateX("+Math.round(i)+"px) translateY("+Math.round(n)+"px)","msTransform"!==L&&(u[L]+=" translateZ(0)")}else t.top?u.top=e.top+"px":u.bottom=e.bottom+"px",t.left?u.left=e.left+"px":u.right=e.right+"px"},c=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(u.position="absolute",l(n.page,e.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(u.position="fixed",l(n.viewport,e.viewport)):"undefined"!=typeof n.offset&&n.offset.top&&n.offset.left?function(){u.position="absolute";var t=o.cache("target-offsetparent",function(){return w(o.target)});w(o.element)!==t&&H(function(){o.element.parentNode.removeChild(o.element),t.appendChild(o.element)}),l(n.offset,e.offset),c=!0}():(u.position="absolute",l({top:!0,left:!0},e.page)),!c){for(var h=!0,p=this.element.parentNode;p&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){h=!1;break}p=p.parentNode}h||(this.element.parentNode.removeChild(this.element),document.body.appendChild(this.element))}var d={},f=!1;for(var i in u){var g=u[i];this.element.style[i]!==g&&(f=!0,d[i]=g)}f&&H(function(){E(o.element.style,d)})}}}]),n}();U.modules=[],I.position=j;var F=E(U,I),E=($=function(){function n(t,e){var n=[],i=!0,o=!1,r=undefined;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){o=!0,r=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),x=(V=I.Utils).getBounds,V.extend),q=(k=V.updateClasses,H=V.defer,["left","top","right","bottom"]);I.modules.push({position:function j(t){var d=this,f=t.top,g=t.left,m=t.targetAttachment;if(!this.options.constraints)return!0;var e=this.cache("element-bounds",function(){return x(d.element)}),y=e.height,v=e.width;if(0===v&&0===y&&"undefined"!=typeof this.lastSize){var n=this.lastSize;v=n.width,y=n.height}var i=this.cache("target-bounds",function(){return d.getTargetBounds()}),b=i.height,_=i.width,o=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&o.push(e),n&&o.push(n)}),o.forEach(function(e){["left","top","right","bottom"].forEach(function(t){o.push(e+"-"+t)})});var w=[],S=E({},m),C=E({},this.attachment);return this.options.constraints.forEach(function(t){var e=t.to,n=t.attachment,i=t.pin;void 0===n&&(n="");var o=undefined,r=undefined;if(0<=n.indexOf(" ")){var s=n.split(" "),a=$(s,2);r=a[0],o=a[1]}else o=r=n;var u=A(d,e);"target"!==r&&"both"!==r||(f<u[1]&&"top"===S.top&&(f+=b,S.top="bottom"),f+y>u[3]&&"bottom"===S.top&&(f-=b,S.top="top")),"together"===r&&("top"===S.top&&("bottom"===C.top&&f<u[1]?(f+=b,S.top="bottom",f+=y,C.top="top"):"top"===C.top&&f+y>u[3]&&f-(y-b)>=u[1]&&(f-=y-b,S.top="bottom",C.top="bottom")),"bottom"===S.top&&("top"===C.top&&f+y>u[3]?(f-=b,S.top="top",f-=y,C.top="bottom"):"bottom"===C.top&&f<u[1]&&f+(2*y-b)<=u[3]&&(f+=y-b,S.top="top",C.top="top")),"middle"===S.top&&(f+y>u[3]&&"top"===C.top?(f-=y,C.top="bottom"):f<u[1]&&"bottom"===C.top&&(f+=y,C.top="top"))),"target"!==o&&"both"!==o||(g<u[0]&&"left"===S.left&&(g+=_,S.left="right"),g+v>u[2]&&"right"===S.left&&(g-=_,S.left="left")),"together"===o&&(g<u[0]&&"left"===S.left?"right"===C.left?(g+=_,S.left="right",g+=v,C.left="left"):"left"===C.left&&(g+=_,S.left="right",g-=v,C.left="right"):g+v>u[2]&&"right"===S.left?"left"===C.left?(g-=_,S.left="left",g-=v,C.left="right"):"right"===C.left&&(g-=_,S.left="left",g+=v,C.left="left"):"center"===S.left&&(g+v>u[2]&&"left"===C.left?(g-=v,C.left="right"):g<u[0]&&"right"===C.left&&(g+=v,C.left="left"))),"element"!==r&&"both"!==r||(f<u[1]&&"bottom"===C.top&&(f+=y,C.top="top"),f+y>u[3]&&"top"===C.top&&(f-=y,C.top="bottom")),"element"!==o&&"both"!==o||(g<u[0]&&("right"===C.left?(g+=v,C.left="left"):"center"===C.left&&(g+=v/2,C.left="left")),g+v>u[2]&&("left"===C.left?(g-=v,C.left="right"):"center"===C.left&&(g-=v/2,C.left="right"))),"string"==typeof i?i=i.split(",").map(function(t){return t.trim()}):!0===i&&(i=["top","left","right","bottom"]),i=i||[];var l,c,h=[],p=[];f<u[1]&&(0<=i.indexOf("top")?(f=u[1],h.push("top")):p.push("top")),f+y>u[3]&&(0<=i.indexOf("bottom")?(f=u[3]-y,h.push("bottom")):p.push("bottom")),g<u[0]&&(0<=i.indexOf("left")?(g=u[0],h.push("left")):p.push("left")),g+v>u[2]&&(0<=i.indexOf("right")?(g=u[2]-v,h.push("right")):p.push("right")),h.length&&(l=undefined,l="undefined"!=typeof d.options.pinnedClass?d.options.pinnedClass:d.getClass("pinned"),w.push(l),h.forEach(function(t){w.push(l+"-"+t)})),p.length&&(c=undefined,c="undefined"!=typeof d.options.outOfBoundsClass?d.options.outOfBoundsClass:d.getClass("out-of-bounds"),w.push(c),p.forEach(function(t){w.push(c+"-"+t)})),(0<=h.indexOf("left")||0<=h.indexOf("right"))&&(C.left=S.left=!1),(0<=h.indexOf("top")||0<=h.indexOf("bottom"))&&(C.top=S.top=!1),S.top===m.top&&S.left===m.left&&C.top===d.attachment.top&&C.left===d.attachment.left||d.updateAttachClasses(C,S)}),H(function(){!1!==d.options.addTargetClasses&&k(d.target,w,o),k(d.element,w,o)}),{top:f,left:g}}});var V,x=(V=I.Utils).getBounds,k=V.updateClasses;H=V.defer;I.modules.push({position:function j(t){var e=this,n=t.top,i=t.left,o=this.cache("element-bounds",function(){return x(e.element)}),r=o.height,s=o.width,a=this.getTargetBounds(),u=n+r,l=i+s,c=[];n<=a.bottom&&u>=a.top&&["left","right"].forEach(function(t){var e=a[t];e!==i&&e!==l||c.push(t)}),i<=a.right&&l>=a.left&&["top","bottom"].forEach(function(t){var e=a[t];e!==n&&e!==u||c.push(t)});var h=[],p=[],d=["left","top","right","bottom"];return h.push(this.getClass("abutted")),d.forEach(function(t){h.push(e.getClass("abutted")+"-"+t)}),c.length&&p.push(this.getClass("abutted")),c.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),H(function(){!1!==e.options.addTargetClasses&&k(e.target,p,h),k(e.element,p,h)}),!0}});$=function(){function n(t,e){var n=[],i=!0,o=!1,r=undefined;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){o=!0,r=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return I.modules.push({position:function j(t){var e=t.top,n=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:n}));var o=undefined,r=undefined;if("string"==typeof i){(i=i.split(" "))[1]=i[1]||i[0];var s=$(i,2);o=s[0],r=s[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=i.top,r=i.left;return{top:e+=o,left:n+=r}}}}),F}),function(t,e){"function"==typeof define&&define.amd?define(["tether"],e):"object"==typeof exports?module.exports=e(require("tether")):t.Drop=e(t.Tether)}(this,function(m){"use strict";function y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function v(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function b(t){var e=t.split(" "),n=s(e,2),i=n[0],o=n[1];if(0<=["left","right"].indexOf(i)){var r=[o,i];i=r[0],o=r[1]}return[i,o].join(" ")}function _(t,e){for(var n=undefined,i=[];-1!==(n=t.indexOf(e));)i.push(t.splice(n,1));return i}function o(t){var e=arguments.length<=0||t===undefined?{}:arguments[0],g=function g(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return new(r.apply(i,[null].concat(e)))};C(g,{createContext:o,drops:[],defaults:{}});var n={classPrefix:"drop",defaults:{position:"bottom left",openOn:"click",beforeClose:null,constrainToScrollParent:!0,constrainToWindow:!0,classes:"",remove:!1,openDelay:0,closeDelay:50,focusDelay:null,blurDelay:null,hoverOpenDelay:null,hoverCloseDelay:null,tetherOptions:{}}};C(g,n,e),C(g.defaults,n.defaults,e.defaults),"undefined"==typeof O[g.classPrefix]&&(O[g.classPrefix]=[]),g.updateBodyClasses=function(){for(var t=!1,e=O[g.classPrefix],n=e.length,i=0;i<n;++i)if(e[i].isOpened()){t=!0;break}t?x(document.body,g.classPrefix+"-open"):E(document.body,g.classPrefix+"-open")};var i=function(){function s(t){if(y(this,s),S(Object.getPrototypeOf(s.prototype),"constructor",this).call(this),this.options=C({},g.defaults,t),this.target=this.options.target,"undefined"==typeof this.target)throw new Error("Drop Error: You must provide a target.");var e="data-"+g.classPrefix,n=this.target.getAttribute(e);n&&null==this.options.content&&(this.options.content=n);for(var i=["position","openOn"],o=0;o<i.length;++o){var r=this.target.getAttribute(e+"-"+i[o]);r&&null==this.options[i[o]]&&(this.options[i[o]]=r)}this.options.classes&&!1!==this.options.addTargetClasses&&x(this.target,this.options.classes),g.drops.push(this),O[g.classPrefix].push(this),this._boundEvents=[],this.bindMethods(),this.setupElements(),this.setupEvents(),this.setupTether()}return v(s,T),w(s,[{key:"_on",value:function i(t,e,n){this._boundEvents.push({element:t,event:e,handler:n}),t.addEventListener(e,n)}},{key:"bindMethods",value:function t(){this.transitionEndHandler=this._transitionEndHandler.bind(this)}},{key:"setupElements",value:function o(){var e=this;if(this.drop=document.createElement("div"),x(this.drop,g.classPrefix),this.options.classes&&x(this.drop,this.options.classes),this.content=document.createElement("div"),x(this.content,g.classPrefix+"-content"),"function"==typeof this.options.content){var n=function n(){var t=e.options.content.call(e,e);if("string"==typeof t)e.content.innerHTML=t;else{if("object"!=typeof t)throw new Error("Drop Error: Content function should return a string or HTMLElement.");e.content.innerHTML="",e.content.appendChild(t)}};n(),this.on("open",n.bind(this))}else"object"==typeof this.options.content?this.content.appendChild(this.options.content):this.content.innerHTML=this.options.content;this.drop.appendChild(this.content)}},{key:"setupTether",value:function r(){var t=this.options.position.split(" ");t[0]=H[t[0]],t=t.join(" ");var e=[];this.options.constrainToScrollParent?e.push({to:"scrollParent",pin:"top, bottom",attachment:"together none"}):e.push({to:"scrollParent"}),!1!==this.options.constrainToWindow?e.push({to:"window",attachment:"together"}):e.push({to:"window"});var n={element:this.drop,target:this.target,attachment:b(t),targetAttachment:b(this.options.position),classPrefix:g.classPrefix,offset:"0 0",targetOffset:"0 0",enabled:!1,constraints:e,addTargetClasses:this.options.addTargetClasses};!1!==this.options.tetherOptions&&(this.tether=new m(C({},n,this.options.tetherOptions)))}},{key:"setupEvents",value:function c(){var e=this;if(this.options.openOn)if("always"!==this.options.openOn){var t=this.options.openOn.split(" ");if(0<=t.indexOf("click"))for(var n=function n(t){e.toggle(t),t.preventDefault()},i=function i(t){e.isOpened()&&(t.target===e.drop||e.drop.contains(t.target)||t.target===e.target||e.target.contains(t.target)||e.close(t))},o=0;o<A.length;++o){var r=A[o];this._on(this.target,r,n),this._on(document,r,i)}var s=null,a=null,u=function u(t){null!==a?clearTimeout(a):s=setTimeout(function(){e.open(t),s=null},("focus"===t.type?e.options.focusDelay:e.options.hoverOpenDelay)||e.options.openDelay)},l=function l(t){null!==s?clearTimeout(s):a=setTimeout(function(){e.close(t),a=null},("blur"===t.type?e.options.blurDelay:e.options.hoverCloseDelay)||e.options.closeDelay)};0<=t.indexOf("hover")&&(this._on(this.target,"mouseover",u),this._on(this.drop,"mouseover",u),this._on(this.target,"mouseout",l),this._on(this.drop,"mouseout",l)),0<=t.indexOf("focus")&&(this._on(this.target,"focus",u),this._on(this.drop,"focus",u),this._on(this.target,"blur",l),this._on(this.drop,"blur",l))}else setTimeout(this.open.bind(this))}},{key:"isOpened",value:function e(){if(this.drop)return k(this.drop,g.classPrefix+"-open")}},{key:"toggle",value:function n(t){this.isOpened()?this.close(t):this.open(t)}},{key:"open",value:function a(){var t=this;this.isOpened()||(this.drop.parentNode||document.body.appendChild(this.drop),"undefined"!=typeof this.tether&&this.tether.enable(),x(this.drop,g.classPrefix+"-open"),x(this.drop,g.classPrefix+"-open-transitionend"),setTimeout(function(){t.drop&&x(t.drop,g.classPrefix+"-after-open")}),"undefined"!=typeof this.tether&&this.tether.position(),this.trigger("open"),g.updateBodyClasses())}},{key:"_transitionEndHandler",value:function u(t){t.target===t.currentTarget&&(k(this.drop,g.classPrefix+"-open")||E(this.drop,g.classPrefix+"-open-transitionend"),this.drop.removeEventListener(I,this.transitionEndHandler))}},{key:"beforeCloseHandler",value:function l(t){var e=!0;return this.isClosing||"function"!=typeof this.options.beforeClose||(e=!(this.isClosing=!0)!==this.options.beforeClose(t,this)),this.isClosing=!1,e}},{key:"close",value:function h(t){this.isOpened()&&this.beforeCloseHandler(t)&&(E(this.drop,g.classPrefix+"-open"),E(this.drop,g.classPrefix+"-after-open"),this.drop.addEventListener(I,this.transitionEndHandler),this.trigger("close"),"undefined"!=typeof this.tether&&this.tether.disable(),g.updateBodyClasses(),this.options.remove&&this.remove(t))}},{key:"remove",value:function p(t){this.close(t),this.drop.parentNode&&this.drop.parentNode.removeChild(this.drop)}},{key:"position",value:function d(){this.isOpened()&&"undefined"!=typeof this.tether&&this.tether.position()}},{key:"destroy",value:function f(){this.remove(),"undefined"!=typeof this.tether&&this.tether.destroy();for(var t=0;t<this._boundEvents.length;++t){var e=this._boundEvents[t],n=e.element,i=e.event,o=e.handler;n.removeEventListener(i,o)}this._boundEvents=[],this.tether=null,this.drop=null,this.content=null,this.target=null,_(O[g.classPrefix],this),_(g.drops,this)}}]),s}();return g}var r=Function.prototype.bind,s=function(){function n(t,e){var n=[],i=!0,o=!1,r=undefined;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(u){o=!0,r=u}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return n(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),w=function(){function i(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(t,e,n){return e&&i(t.prototype,e),n&&i(t,n),t}}(),S=function c(t,e,n){for(var i=!0;i;){var o=t,r=e,s=n;i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(a!==undefined){if("value"in a)return a.value;var u=a.get;return u===undefined?undefined:u.call(s)}var l=Object.getPrototypeOf(o);if(null===l)return undefined;t=l,e=r,n=s,i=!0,a=l=undefined}},t=m.Utils,C=t.extend,x=t.addClass,E=t.removeClass,k=t.hasClass,T=t.Evented,A=["click"];"ontouchstart"in document.documentElement&&A.push("touchstart");var e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"otransitionend",transition:"transitionend"},I="";for(var n in e){if({}.hasOwnProperty.call(e,n))"undefined"!=typeof document.createElement("p").style[n]&&(I=e[n])}var H={left:"right",right:"left",top:"bottom",bottom:"top",middle:"middle",center:"center"},O={},i=o();return document.addEventListener("DOMContentLoaded",function(){i.updateBodyClasses()}),i}),function(O){var $=function(){"use strict";return{isMsie:function(){return!!/(msie|trident)/i.test(navigator.userAgent)&&navigator.userAgent.match(/(msie |rv:)(\d+(.\d+)?)/i)[2]},isBlankString:function(t){return!t||/^\s*$/.test(t)},escapeRegExChars:function(t){return t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isArray:O.isArray,isFunction:O.isFunction,isObject:O.isPlainObject,isUndefined:function(t){return void 0===t},toStr:function e(t){return $.isUndefined(t)||null===t?"":t+""},bind:O.proxy,each:function(t,n){function e(t,e){return n(e,t)}O.each(t,e)},map:O.map,filter:O.grep,every:function(n,i){var o=!0;return n?(O.each(n,function(t,e){if(!(o=i.call(null,e,t,n
)))return!1}),!!o):o},some:function(n,i){var o=!1;return n?(O.each(n,function(t,e){if(o=i.call(null,e,t,n))return!1}),!!o):o},mixin:O.extend,getUniqueId:(t=0,function(){return t++}),templatify:function n(t){function e(){return String(t)}return O.isFunction(t)?t:e},defer:function(t){setTimeout(t,0)},debounce:function(o,r,s){var a,u;return function(){var t,e,n=this,i=arguments;return t=function(){a=null,s||(u=o.apply(n,i))},e=s&&!a,clearTimeout(a),a=setTimeout(t,r),e&&(u=o.apply(n,i)),u}},throttle:function(n,i){var o,r,s,a,u,l;return u=0,l=function(){u=new Date,s=null,a=n.apply(o,r)},function(){var t=new Date,e=i-(t-u);return o=this,r=arguments,e<=0?(clearTimeout(s),s=null,u=t,a=n.apply(o,r)):s||(s=setTimeout(l,e)),a}},noop:function(){}};var t}(),i="0.10.5",b=function(){"use strict";function t(t){return(t=$.toStr(t))?t.split(/\s+/):[]}function e(t){return(t=$.toStr(t))?t.split(/\W+/):[]}function n(o){return function e(){var t=[].slice.call(arguments,0);return function i(e){var n=[];return $.each(t,function(t){n=n.concat(o($.toStr(e[t])))}),n}}}return{nonword:e,whitespace:t,obj:{nonword:n(e),whitespace:n(t)}}}(),r=function(){"use strict";function t(t){this.maxSize=$.isNumber(t)?t:100,this.reset(),this.maxSize<=0&&(this.set=this.get=O.noop)}function e(){this.head=this.tail=null}function o(t,e){this.key=t,this.val=e,this.prev=this.next=null}return $.mixin(t.prototype,{set:function r(t,e){var n,i=this.list.tail;this.size>=this.maxSize&&(this.list.remove(i),delete this.hash[i.key]),(n=this.hash[t])?(n.val=e,this.list.moveToFront(n)):(n=new o(t,e),this.list.add(n),this.hash[t]=n,this.size++)},get:function n(t){var e=this.hash[t];if(e)return this.list.moveToFront(e),e.val},reset:function i(){this.size=0,this.hash={},this.list=new e}}),$.mixin(e.prototype,{add:function s(t){this.head&&(t.next=this.head,this.head.prev=t),this.head=t,this.tail=this.tail||t},remove:function a(t){t.prev?t.prev.next=t.next:this.head=t.next,t.next?t.next.prev=t.prev:this.tail=t.prev},moveToFront:function(t){this.remove(t),this.add(t)}}),t}(),_=function(){"use strict";function t(t){this.prefix=["__",t,"__"].join(""),this.ttlKey="__ttl__",this.keyMatcher=new RegExp("^"+$.escapeRegExChars(this.prefix))}function i(){return(new Date).getTime()}function o(t){return JSON.stringify($.isUndefined(t)?null:t)}function n(t){return JSON.parse(t)}var r,e;try{(r=window.localStorage).setItem("~~~","!"),r.removeItem("~~~")}catch(s){r=null}return e=r&&window.JSON?{_prefix:function(t){return this.prefix+t},_ttlKey:function(t){return this._prefix(t)+this.ttlKey},get:function(t){return this.isExpired(t)&&this.remove(t),n(r.getItem(this._prefix(t)))},set:function(t,e,n){return $.isNumber(n)?r.setItem(this._ttlKey(t),o(i()+n)):r.removeItem(this._ttlKey(t)),r.setItem(this._prefix(t),o(e))},remove:function(t){return r.removeItem(this._ttlKey(t)),r.removeItem(this._prefix(t)),this},clear:function(){var t,e,n=[],i=r.length;for(t=0;t<i;t++)(e=r.key(t)).match(this.keyMatcher)&&n.push(e.replace(this.keyMatcher,""));for(t=n.length;t--;)this.remove(n[t]);return this},isExpired:function(t){var e=n(r.getItem(this._ttlKey(t)));return!!($.isNumber(e)&&i()>e)}}:{get:$.noop,set:$.noop,remove:$.noop,clear:$.noop,isExpired:$.noop},$.mixin(t.prototype,e),t}(),w=function(){"use strict";function t(t){t=t||{},this.cancelled=!1,this.lastUrl=null,this._send=t.transport?e(t.transport):O.ajax,this._get=t.rateLimiter?t.rateLimiter(this._get):this._get,this._cache=!1===t.cache?new r(0):n}function e(r){return function s(t,e){function n(t){$.defer(function(){o.resolve(t)})}function i(t){$.defer(function(){o.reject(t)})}var o=O.Deferred();return r(t,e,n,i),o}}var u=0,l={},c=6,n=new r(10);return t.setMaxPendingRequests=function i(t){c=t},t.resetCache=function o(){n.reset()},$.mixin(t.prototype,{_get:function(e,t,n){function i(t){n&&n(null,t),a._cache.set(e,t)}function o(){n&&n(!0)}function r(){u--,delete l[e],a.onDeckRequestArgs&&(a._get.apply(a,a.onDeckRequestArgs),a.onDeckRequestArgs=null)}var s,a=this;this.cancelled||e!==this.lastUrl||((s=l[e])?s.done(i).fail(o):u<c?(u++,l[e]=this._send(e,t).done(i).fail(o).always(r)):this.onDeckRequestArgs=[].slice.call(arguments,0))},get:function(t,e,n){var i;return $.isFunction(e)&&(n=e,e={}),this.cancelled=!1,this.lastUrl=t,(i=this._cache.get(t))?$.defer(function(){n&&n(null,i)}):this._get(t,e,n),!!i},cancel:function(){this.cancelled=!0}}),t}(),S=function(){"use strict";function t(t){(t=t||{}).datumTokenizer&&t.queryTokenizer||O.error("datumTokenizer and queryTokenizer are both required"),this.datumTokenizer=t.datumTokenizer,this.queryTokenizer=t.queryTokenizer,this.reset()}function n(t){return t=$.filter(t,function(t){return!!t}),t=$.map(t,function(t){return t.toLowerCase()})}function s(){return{ids:[],children:{}}}function i(t){for(var e={},n=[],i=0,o=t.length;i<o;i++)e[t[i]]||(e[t[i]]=!0,n.push(t[i]));return n}function a(t,e){function n(t,e){return t-e}var i=0,o=0,r=[];t=t.sort(n),e=e.sort(n);for(var s=t.length,a=e.length;i<s&&o<a;)t[i]<e[o]?i++:(t[i]>e[o]||(r.push(t[i]),i++),o++);return r}return $.mixin(t.prototype,{bootstrap:function e(t){this.datums=t.datums,this.trie=t.trie},add:function(t){var r=this;t=$.isArray(t)?t:[t],$.each(t,function(t){var o,e;o=r.datums.push(t)-1,e=n(r.datumTokenizer(t)),$.each(e,function(t){var e,n,i;for(e=r.trie,n=t.split("");i=n.shift();)(e=e.children[i]||(e.children[i]=s())).ids.push(o)})})},get:function o(t){var e,r,s=this;return e=n(this.queryTokenizer(t)),$.each(e,function(t){var e,n,i,o;if(r&&0===r.length)return!1;for(e=s.trie,n=t.split("");e&&(i=n.shift());)e=e.children[i];if(!e||0!==n.length)return!(r=[]);o=e.ids.slice(0),r=r?a(r,o):o}),r?$.map(i(r),function(t){return s.datums[t]}):[]},reset:function r(){this.datums=[],this.trie=s()},serialize:function u(){return{datums:this.datums,trie:this.trie}}}),t}(),C=function(){"use strict";function t(t){return t.local||null}function e(t){var e,n;return n={url:null,thumbprint:"",ttl:864e5,filter:null,ajax:{}},(e=t.prefetch||null)&&(e=$.isString(e)?{url:e}:e,(e=$.mixin(n,e)).thumbprint=i+e.thumbprint,e.ajax.type=e.ajax.type||"GET",e.ajax.dataType=e.ajax.dataType||"json",!e.url&&O.error("prefetch requires url to be set")),e}function n(t){function e(e){return function(t){return $.debounce(t,e)}}function n(e){return function(t){return $.throttle(t,e)}}var i,o;return o={url:null,cache:!0,wildcard:"%QUERY",replace:null,rateLimitBy:"debounce",rateLimitWait:300,send:null,filter:null,ajax:{}},(i=t.remote||null)&&(i=$.isString(i)?{url:i}:i,(i=$.mixin(o,i)).rateLimiter=/^throttle$/i.test(i.rateLimitBy)?n(i.rateLimitWait):e(i.rateLimitWait),i.ajax.type=i.ajax.type||"GET",i.ajax.dataType=i.ajax.dataType||"json",delete i.rateLimitBy,delete i.rateLimitWait,!i.url&&O.error("remote requires url to be set")),i}return{local:t,prefetch:e,remote:n}}();!function(t){"use strict";function e(t){t&&(t.local||t.prefetch||t.remote)||O.error("one of local, prefetch, or remote is required"),this.limit=t.limit||5,this.sorter=n(t.sorter),this.dupDetector=t.dupDetector||i,this.local=C.local(t),this.prefetch=C.prefetch(t),this.remote=C.remote(t),this.cacheKey=this.prefetch?this.prefetch.cacheKey||this.prefetch.url:null,this.index=new S({datumTokenizer:t.datumTokenizer,queryTokenizer:t.queryTokenizer}),this.storage=this.cacheKey?new _(this.cacheKey):null}function n(e){function t(t){return t.sort(e)}function n(t){return t}return $.isFunction(e)?t:n}function i(){return!1}var o,r;o=t.Bloodhound,r={data:"data",protocol:"protocol",thumbprint:"thumbprint"},(t.Bloodhound=e).noConflict=function s(){return t.Bloodhound=o,e},e.tokenizers=b,$.mixin(e.prototype,{_loadPrefetch:function a(e){function t(t){o.clear(),o.add(e.filter?e.filter(t):t),o._saveToStorage(o.index.serialize(),e.thumbprint,e.ttl)}var n,i,o=this;return(n=this._readFromStorage(e.thumbprint))?(this.index.bootstrap(n),i=O.Deferred().resolve()):i=O.ajax(e.url,e.ajax).done(t),i},_getFromRemote:function u(t,n){function e(t,e){n(t?[]:r.remote.filter?r.remote.filter(e):e)}var i,o,r=this;if(this.transport)return t=t||"",o=encodeURIComponent(t),i=this.remote.replace?this.remote.replace(this.remote.url,t):this.remote.url.replace(this.remote.wildcard,o),this.transport.get(i,this.remote.ajax,e)},_cancelLastRemoteRequest:function l(){this.transport&&this.transport.cancel()},_saveToStorage:function c(t,e,n){this.storage&&(this.storage.set(r.data,t,n),this.storage.set(r.protocol,location.protocol,n),this.storage.set(r.thumbprint,e,n))},_readFromStorage:function h(t){var e,n={};return this.storage&&(n.data=this.storage.get(r.data),n.protocol=this.storage.get(r.protocol),n.thumbprint=this.storage.get(r.thumbprint)),e=n.thumbprint!==t||n.protocol!==location.protocol,n.data&&!e?n.data:null},_initialize:function p(){function t(){n.add($.isFunction(i)?i():i)}var e,n=this,i=this.local;return e=this.prefetch?this._loadPrefetch(this.prefetch):O.Deferred().resolve(),i&&e.done(t),this.transport=this.remote?new w(this.remote):null,this.initPromise=e.promise()},initialize:function p(t){return!this.initPromise||t?this._initialize():this.initPromise},add:function d(t){this.index.add(t)},get:function f(t,e){function n(t){var n=o.slice(0);$.each(t,function(e){return!$.some(n,function(t){return i.dupDetector(e,t)})&&n.push(e),n.length<i.limit}),e&&e(i.sorter(n))}var i=this,o=[],r=!1;o=this.index.get(t),(o=this.sorter(o).slice(0,this.limit)).length<this.limit?r=this._getFromRemote(t,n):this._cancelLastRemoteRequest(),r||(0<o.length||!this.transport)&&e&&e(o)},clear:function g(){this.index.reset()},clearPrefetchCache:function m(){this.storage&&this.storage.clear()},clearRemoteCache:function y(){this.transport&&w.resetCache()},ttAdapter:function v(){return $.bind(this.get,this)}})}(this);var L={wrapper:'<span class="twitter-typeahead"></span>',dropdown:'<span class="tt-dropdown-menu"></span>',dataset:'<div class="tt-dataset-%CLASS%"></div>',suggestions:'<span class="tt-suggestions"></span>',suggestion:'<div class="tt-suggestion"></div>'},D=function(){"use strict";var t={wrapper:{position:"relative",display:"inline-block"},hint:{position:"absolute",top:"0",left:"0",borderColor:"transparent",boxShadow:"none",opacity:"1"},input:{position:"relative",verticalAlign:"top",backgroundColor:"transparent"},inputWithNoHint:{position:"relative",verticalAlign:"top"},dropdown:{position:"absolute",top:"100%",left:"0",zIndex:"100",display:"none"},suggestions:{display:"block"},suggestion:{whiteSpace:"nowrap",cursor:"pointer"},suggestionChild:{whiteSpace:"normal"},ltr:{left:"0",right:"auto"},rtl:{left:"auto",right:" 0"}};return $.isMsie()&&$.mixin(t.input,{backgroundImage:"url(data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7)"}),$.isMsie()&&$.isMsie()<=7&&$.mixin(t.input,{marginTop:"-1px"}),t}(),j=function(){"use strict";function t(t){t&&t.el||O.error("EventBus initialized without el"),this.$el=O(t.el)}var n="typeahead:";return $.mixin(t.prototype,{trigger:function(t){var e=[].slice.call(arguments,1);this.$el.trigger(n+t,e)}}),t}(),k=function(){"use strict";function i(t,e,n,i){var o;if(!n)return this;for(e=e.split(u),n=i?a(n,i):n,this._callbacks=this._callbacks||{};o=e.shift();)this._callbacks[o]=this._callbacks[o]||{sync:[],async:[]},this._callbacks[o][t].push(n);return this}function t(t,e,n){return i.call(this,"async",t,e,n)}function e(t,e,n){return i.call(this,"sync",t,e,n)}function n(t){var e;if(!this._callbacks)return this;for(t=t.split(u);e=t.shift();)delete this._callbacks[e];return this}function o(t){var e,n,i,o,r;if(!this._callbacks)return this;for(t=t.split(u),i=[].slice.call(arguments,1);(e=t.shift())&&(n=this._callbacks[e]);)o=s(n.sync,this,[e].concat(i)),r=s(n.async,this,[e].concat(i)),o()&&l(r);return this}function s(i,o,r){function t(){for(var t,e=0,n=i.length;!t&&e<n;e+=1)t=!1===i[e].apply(o,r);return!t}return t}function r(){return window.setImmediate?function e(t){setImmediate(function(){t()})}:function n(t){setTimeout(function(){t()},0)}}function a(t,e){return t.bind?t.bind(e):function(){t.apply(e,[].slice.call(arguments,0))}}var u=/\s+/,l=r();return{onSync:e,onAsync:t,off:n,trigger:o}}(),m=function(a){"use strict";function e(t,e,n){for(var i,o=[],r=0,s=t.length;r<s;r++)o.push($.escapeRegExChars(t[r]));return i=n?"\\b("+o.join("|")+")\\b":"("+o.join("|")+")",e?new RegExp(i):new RegExp(i,"i")}var n={node:null,pattern:null,tagName:"strong",className:null,wordsOnly:!1,caseSensitive:!1};return function i(o){function t(t){var e,n,i;return(e=s.exec(t.data))&&(i=a.createElement(o.tagName),o.className&&(i.className=o.className),(n=t.splitText(e.index)).splitText(e[0].length),i.appendChild(n.cloneNode(!0)),t.parentNode.replaceChild(i,n)),!!e}function r(t,e){for(var n,i=3,o=0;o<t.childNodes.length;o++)(n=t.childNodes[o]).nodeType===i?o+=e(n)?1:0:r(n,e)}var s;(o=$.mixin({},n,o)).node&&o.pattern&&(o.pattern=$.isArray(o.pattern)?o.pattern:[o.pattern],s=e(o.pattern,o.caseSensitive,o.wordsOnly),r(o.node,t))}}(window.document),B=function(){"use strict";function n(t){var e,n,i,o,r=this;(t=t||{}).input||O.error("input is missing"),e=$.bind(this._onBlur,this),n=$.bind(this._onFocus,this),i=$.bind(this._onKeydown,this),o=$.bind(this._onInput,this),this.$hint=O(t.hint),this.$input=O(t.input).on("blur.tt",e).on("focus.tt",n).on("keydown.tt",i),0===this.$hint.length&&(this.setHint=this.getHint=this.clearHint=this.clearHintIfInvalid=$.noop),$.isMsie()?this.$input.on("keydown.tt keypress.tt cut.tt paste.tt",function(t){a[t.which||t.keyCode]||$.defer($.bind(r._onInput,r,t))}):this.$input.on("input.tt",o),this.query=this.$input.val(),this.$overflowHelper=s(this.$input)}function s(t){return O('<pre aria-hidden="true"></pre>').css({position:"absolute",visibility:"hidden",whiteSpace:"pre",fontFamily:t.css("font-family"),fontSize:t.css("font-size"),fontStyle:t.css("font-style"),fontVariant:t.css("font-variant"),fontWeight:t.css("font-weight"),wordSpacing:t.css("word-spacing"),letterSpacing:t.css("letter-spacing"),textIndent:t.css("text-indent"),textRendering:t.css("text-rendering"),textTransform:t.css("text-transform")}).insertAfter(t)}function i(t,e){return n.normalizeQuery(t)===n.normalizeQuery(e)}function r(t){return t.altKey||t.ctrlKey||t.metaKey||t.shiftKey}var a;return a={9:"tab",27:"esc",37:"left",39:"right",13:"enter",38:"up",40:"down"},n.normalizeQuery=function(t){return(t||"").replace(/^\s*/g,"").replace(/\s{2,}/g," ")},$.mixin(n.prototype,k,{_onBlur:function t(){this.resetInputValue(),this.trigger("blurred")},_onFocus:function e(){this.trigger("focused")},_onKeydown:function o(t){var e=a[t.which||t.keyCode];this._managePreventDefault(e,t),e&&this._shouldTrigger(e,t)&&this.trigger(e+"Keyed",t)},_onInput:function u(){this._checkInputValue()},_managePreventDefault:function l(t,e){var n,i,o;switch(t){case"tab":i=this.getHint(),o=this.getInputValue(),n=i&&i!==o&&!r(e);break;case"up":case"down":n=!r(e);break;default:n=!1}n&&e.preventDefault()},_shouldTrigger:function c(t,e){var n;switch(t){case"tab":n=!r(e);break;default:n=!0}return n},_checkInputValue:function h(){var t,e,n;n=!!(e=i(t=this.getInputValue(),this.query))&&this.query.length!==t.length,this.query=t,e?n&&this.trigger("whitespaceChanged",this.query):this.trigger("queryChanged",this.query)},focus:function p(){this.$input.focus()},blur:function d(){this.$input.blur()},getQuery:function f(){return this.query},setQuery:function g(t){this.query=t},getInputValue:function m(){return this.$input.val()},setInputValue:function y(t,e){this.$input.val(t),e?this.clearHint():this._checkInputValue()},resetInputValue:function v(){this.setInputValue(this.query,!0)},getHint:function b(){return this.$hint.val()},setHint:function _(t){this.$hint.val(t)},clearHint:function w(){this.setHint("")},clearHintIfInvalid:function S(){var t,e,n;n=(t=this.getInputValue())!==(e=this.getHint())&&0===e.indexOf(t),!(""!==t&&n&&!this.hasOverflow())&&this.clearHint()},getLanguageDirection:function C(){return(this.$input.css("direction")||"ltr").toLowerCase()},hasOverflow:function x(){var t=this.$input.width()-2;return this.$overflowHelper.text(this.getInputValue()),this.$overflowHelper.width()>=t},isCursorAtEnd:function(){var t,e,n;return t=this.$input.val().length,e=this.$input[0].selectionStart,$.isNumber(e)?e===t:!document.selection||((n=document.selection.createRange()).moveStart("character",-t),t===n.text.length)},destroy:function E(){this.$hint.off(".tt"),this.$input.off(".tt"),this.$hint=this.$input=this.$overflowHelper=null}}),n}(),x=function(){"use strict";function t(t){(t=t||{}).templates=t.templates||{},t.source||O.error("missing source"),t.name&&!i(t.name)&&O.error("invalid dataset name: "+t.name),this.query=null,this.highlight=!!t.highlight,this.name=t.name||$.getUniqueId(),this.source=t.source,this.displayFn=e(t.display||t.displayKey),this.templates=n(t.templates,this.displayFn),this.$el=O(L.dataset.replace("%CLASS%",this.name))}function e(e){function t(t){return t[e]}return e=e||"value",$.isFunction(e)?e:t}function n(t,e){function n(t){return"<p>"+e(t)+"</p>"}return{empty:t.empty&&$.templatify(t.empty),header:t.header&&$.templatify(t.header),footer:t.footer&&$.templatify(t.footer),suggestion:t.suggestion||n}}function i(t){return/^[_a-zA-Z0-9-]+$/.test(t)}var u="ttDataset",l="ttValue",c="ttDatum";return t.extractDatasetName=function o(t){return O(t).data(u)},t.extractValue=function r(t){return O(t).data(l)},t.extractDatum=function r(t){return O(t).data(c)},$.mixin(t.prototype,k,{_render:function h(i,o){function t(){return a.templates.empty({query:i,isEmpty:!0})}function e(){function t(t){var e;return(e=O(L.suggestion).append(a.templates.suggestion(t)).data(u,a.name).data(l,a.displayFn(t)).data(c,t)).children().each(function(){O(this).css(D.suggestionChild)}),e}var e,n;return e=O(L.suggestions).css(D.suggestions),n=$.map(o,t),e.append.apply(e,n),a.highlight&&m({className:"tt-highlight",node:e[0],pattern:i}),e}function n(){return a.templates.header({query:i,isEmpty:!s})}function r(){return a.templates.footer({query:i,isEmpty:!s})}if(this.$el){var s,a=this;this.$el.empty(),!(s=o&&o.length)&&this.templates.empty?this.$el.html(t()).prepend(a.templates.header?n():null).append(a.templates.footer?r():null):s&&this.$el.html(e()).prepend(a.templates.header?n():null).append(a.templates.footer?r():null),this.trigger("rendered")}},getRoot:function s(){return this.$el},update:function a(e){function t(t){n.canceled||e!==n.query||n._render(e,t)}var n=this;this.query=e,this.canceled=!1,this.source(e,t)},cancel:function p(){this.canceled=!0},clear:function d(){this.cancel(),this.$el.empty(),this.trigger("rendered")},isEmpty:function f(){return this.$el.is(":empty")},destroy:function g(){this.$el=null}}),t}(),M=function(){"use strict";function t(t){var e,n,i,o=this;(t=t||{}).menu||O.error("menu is required"),this.isOpen=!1,this.isEmpty=!0,this.datasets=$.map(t.datasets,r),e=$.bind(this._onSuggestionClick,this),n=$.bind(this._onSuggestionMouseEnter,this),i=$.bind(this._onSuggestionMouseLeave,this),this.$menu=O(t.menu).on("click.tt",".tt-suggestion",e).on("mouseenter.tt",".tt-suggestion",n).on("mouseleave.tt",".tt-suggestion",i),$.each(this.datasets,function(t){o.$menu.append(t.getRoot()),t.onSync("rendered",o._onRendered,o)})}function r(t){return new x(t)}return $.mixin(t.prototype,k,{_onSuggestionClick:function e(t){this.trigger("suggestionClicked",O(t.currentTarget))},_onSuggestionMouseEnter:function n(t){this._removeCursor(),this._setCursor(O(t.currentTarget),!0)},_onSuggestionMouseLeave:function i(){this._removeCursor()},_onRendered:function o(){function t(t){return t.isEmpty()}this.isEmpty=$.every(this.datasets,t),this.isEmpty?this._hide():this.isOpen&&this._show(),this.trigger("datasetRendered")},_hide:function(){this.$menu.hide()},_show:function(){this.$menu.css("display","block")},_getSuggestions:function s(){return this.$menu.find(".tt-suggestion")},_getCursor:function a(){return this.$menu.find(".tt-cursor").first()},_setCursor:function u(t,e){t.first().addClass("tt-cursor"),!e&&this.trigger("cursorMoved")},_removeCursor:function l(){this._getCursor().removeClass("tt-cursor")},_moveCursor:function c(t){var e,n,i,o;this.isOpen&&(n=this._getCursor(),e=this._getSuggestions(),this._removeCursor(),-1!==(i=((i=e.index(n)+t)+1)%(e.length+1)-1)?(i<-1&&(i=e.length-1),this._setCursor(o=e.eq(i)),this._ensureVisible(o)):this.trigger("cursorRemoved"))},_ensureVisible:function h(t){var e,n,i,o;n=(e=t.position().top)+t.outerHeight(!0),i=this.$menu.scrollTop(),o=this.$menu.height()+parseInt(this.$menu.css("paddingTop"),10)+parseInt(this.$menu.css("paddingBottom"),10),e<0?this.$menu.scrollTop(i+e):o<n&&this.$menu.scrollTop(i+(n-o))},close:function p(){this.isOpen&&(this.isOpen=!1,this._removeCursor(),this._hide(),this.trigger("closed"))},open:function d(){this.isOpen||(this.isOpen=!0,!this.isEmpty&&this._show(),this.trigger("opened"))},setLanguageDirection:function f(t){this.$menu.css("ltr"===t?D.ltr:D.rtl)},moveCursorUp:function g(){this._moveCursor(-1)},moveCursorDown:function m(){this._moveCursor(1)},getDatumForSuggestion:function y(t){var e=null;return t.length&&(e={raw:x.extractDatum(t),value:x.extractValue(t),datasetName:x.extractDatasetName(t)}),e},getDatumForCursor:function v(){return this.getDatumForSuggestion(this._getCursor().first())},getDatumForTopSuggestion:function b(){return this.getDatumForSuggestion(this._getSuggestions().first())},update:function _(e){function t(t){t.update(e)}$.each(this.datasets,t)},empty:function w(){function t(t){t.clear()}$.each(this.datasets,t),this.isEmpty=!0},isVisible:function S(){return this.isOpen&&!this.isEmpty},destroy:function C(){function t(t){t.destroy()}this.$menu.off(".tt"),this.$menu=null,$.each(this.datasets,t)}}),t}(),l=function(){"use strict";function t(t){var o,r,e;(t=t||{}).input||O.error("missing input"),this.isActivated=!1,this.autoselect=!!t.autoselect,this.minLength=$.isNumber(t.minLength)?t.minLength:1,this.$node=n(t.input,t.withHint),o=this.$node.find(".tt-dropdown-menu"),r=this.$node.find(".tt-input"),e=this.$node.find(".tt-hint"),r.on("blur.tt",function(t){var e,n,i;e=document.activeElement,n=o.is(e),i=0<o.has(e).length,$.isMsie()&&(n||i)&&(t.preventDefault(),t.stopImmediatePropagation(),$.defer(function(){r.focus()}))}),o.on("mousedown.tt",function(t){t.preventDefault()}),this.eventBus=t.eventBus||new j({el:r}),this.dropdown=new M({menu:o,datasets:t.datasets}).onSync("suggestionClicked",this._onSuggestionClicked,this).onSync("cursorMoved",this._onCursorMoved,this).onSync("cursorRemoved",this._onCursorRemoved,this).onSync("opened",this._onOpened,this).onSync("closed",this._onClosed,this).onAsync("datasetRendered",this._onDatasetRendered,this),this.input=new B({input:r,hint:e}).onSync("focused",this._onFocused,this).onSync("blurred",this._onBlurred,this).onSync("enterKeyed",this._onEnterKeyed,this).onSync("tabKeyed",this._onTabKeyed,this).onSync("escKeyed",this._onEscKeyed,this).onSync("upKeyed",this._onUpKeyed,this).onSync("downKeyed",this._onDownKeyed,this).onSync("leftKeyed",this._onLeftKeyed,this).onSync("rightKeyed",this._onRightKeyed,this).onSync("queryChanged",this._onQueryChanged,this).onSync("whitespaceChanged",this._onWhitespaceChanged,this),this._setLanguageDirection()}function n(t,e){var n,i,o,r;n=O(t),i=O(L.wrapper).css(D.wrapper),o=O(L.dropdown).css(D.dropdown),(r=n.clone().css(D.hint).css(a(n))).val("").removeData().addClass("tt-hint").removeAttr("id name placeholder required").prop("readonly",!0).attr({autocomplete:"off",spellcheck:"false",tabindex:-1}),n.data(u,{dir:n.attr("dir"),autocomplete:n.attr("autocomplete"),spellcheck:n.attr("spellcheck"),style:n.attr("style")}),n.addClass("tt-input").attr({autocomplete:"off",spellcheck:!1}).css(e?D.input:D.inputWithNoHint);try{!n.attr("dir")&&n.attr("dir","auto")}catch(s){}return n.wrap(i).parent().prepend(e?r:null).append(o)}function a(t){return{backgroundAttachment:t.css("background-attachment"),backgroundClip:t.css("background-clip"),backgroundColor:t.css("background-color"),backgroundImage:t.css("background-image"),backgroundOrigin:t.css("background-origin"),backgroundPosition:t.css("background-position"),backgroundRepeat:t.css("background-repeat"),backgroundSize:t.css("background-size")}}function e(t){var n=t.find(".tt-input");$.each(n.data(u),function(t,e){$.isUndefined(t)?n.removeAttr(e):n.attr(e,t)}),n.detach().removeData(u).removeClass("tt-input").insertAfter(t),t.remove()}var u="ttAttrs";return $.mixin(t.prototype,{_onSuggestionClicked:function i(t,e){var n;(n=this.dropdown.getDatumForSuggestion(e))&&this._select(n)},_onCursorMoved:function o(){var t=this.dropdown.getDatumForCursor();this.input.setInputValue(t.value,!0),this.eventBus.trigger("cursorchanged",t.raw,t.datasetName)},_onCursorRemoved:function r(){this.input.resetInputValue(),this._updateHint()},_onDatasetRendered:function s(){this._updateHint()},_onOpened:function l(){this._updateHint(),this.eventBus.trigger("opened")},_onClosed:function c(){this.input.clearHint(),this.eventBus.trigger("closed")},_onFocused:function h(){this.isActivated=!0,this.dropdown.open()},_onBlurred:function p(){this.isActivated=!1,this.dropdown.empty(),this.dropdown.close()},_onEnterKeyed:function d(t,e){var n,i;n=this.dropdown.getDatumForCursor(),i=this.dropdown.getDatumForTopSuggestion(),n?(this._select(n),e.preventDefault()):this.autoselect&&i&&(this._select(i),e.preventDefault())},_onTabKeyed:function f(t,e){var n;(n=this.dropdown.getDatumForCursor())?(this._select(n),e.preventDefault()):this._autocomplete(!0)},_onEscKeyed:function g(){this.dropdown.close(),this.input.resetInputValue()},_onUpKeyed:function m(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorUp(),this.dropdown.open()},_onDownKeyed:function y(){var t=this.input.getQuery();this.dropdown.isEmpty&&t.length>=this.minLength?this.dropdown.update(t):this.dropdown.moveCursorDown(),this.dropdown.open()},_onLeftKeyed:function v(){"rtl"===this.dir&&this._autocomplete()},_onRightKeyed:function b(){"ltr"===this.dir&&this._autocomplete()},_onQueryChanged:function _(t,e){this.input.clearHintIfInvalid(),e.length>=this.minLength?this.dropdown.update(e):this.dropdown.empty(),this.dropdown.open(),this._setLanguageDirection()},_onWhitespaceChanged:function w(){this._updateHint(),this.dropdown.open()},_setLanguageDirection:function S(){var t;this.dir!==(t=this.input.getLanguageDirection())&&(this.dir=t,this.$node.css("direction",t),this.dropdown.setLanguageDirection(t))},_updateHint:function C(){var t,e,n,i,o;(t=this.dropdown.getDatumForTopSuggestion())&&this.dropdown.isVisible()&&!this.input.hasOverflow()?(e=this.input.getInputValue(),n=B.normalizeQuery(e),i=$.escapeRegExChars(n),(o=new RegExp("^(?:"+i+")(.+$)","i").exec(t.value))?this.input.setHint(e+o[1]):this.input.clearHint()):this.input.clearHint()},_autocomplete:function x(t){var e,n,i,o;e=this.input.getHint(),n=this.input.getQuery(),i=t||this.input.isCursorAtEnd(),e&&n!==e&&i&&((o=this.dropdown.getDatumForTopSuggestion())&&this.input.setInputValue(o.value),this.eventBus.trigger("autocompleted",o.raw,o.datasetName))},_select:function E(t){this.input.setQuery(t.value),this.input.setInputValue(t.value,!0),this._setLanguageDirection(),this.eventBus.trigger("selected",t.raw,t.datasetName),this.dropdown.close(),$.defer($.bind(this.dropdown.empty,this.dropdown))},open:function k(){this.dropdown.open()},close:function T(){this.dropdown.close()},setVal:function A(t){t=$.toStr(t),this.isActivated?this.input.setInputValue(t):(this.input.setQuery(t),this.input.setInputValue(t,!0)),this._setLanguageDirection()},getVal:function I(){return this.input.getQuery()},destroy:function H(){this.input.destroy(),this.dropdown.destroy(),e(this.$node),this.$node=null}}),t}();!function(){"use strict";var t,o,n;t=O.fn.typeahead,o="ttTypeahead",n={initialize:function e(n,i){function t(){var t,e=O(this);$.each(i,function(t){t.highlight=!!n.highlight}),t=new l({input:e,eventBus:new j({el:e}),withHint:!!$.isUndefined(n.hint)||!!n.hint,minLength:n.minLength,autoselect:n.autoselect,datasets:i}),e.data(o,t)}return i=$.isArray(i)?i:[].slice.call(arguments,1),n=n||{},this.each(t)},open:function i(){function t(){var t;(t=O(this).data(o))&&t.open()}return this.each(t)},close:function r(){function t(){var t;(t=O(this).data(o))&&t.close()}return this.each(t)},val:function s(e){function t(){var t;(t=O(this).data(o))&&t.setVal(e)}function n(t){var e,n;return(e=t.data(o))&&(n=e.getVal()),n}return arguments.length?this.each(t):n(this.first())},destroy:function a(){function t(){var t,e=O(this);(t=e.data(o))&&(t.destroy(),e.removeData(o))}return this.each(t)}},O.fn.typeahead=function(t){var e;return n[t]&&"initialize"!==t?(e=this.filter(function(){return!!O(this).data(o)}),n[t].apply(e,[].slice.call(arguments,1))):n.initialize.apply(this,arguments)},O.fn.typeahead.noConflict=function u(){return O.fn.typeahead=t,this}}()}(window.jQuery),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.GlobalNav=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click .global-nav__mobile-top-level-expansion-link":"toggleSecondLevelSection","click .free-course-link":"loadFreeCourses"},e.prototype.initialize=function(){var t,e;return $(".global-nav__mobile-toggle").on("click",(t=this,function(){return t.toggle()})),$(window).on("resize",(e=this,function(){return e._onResize()})),this.$pageContent=$(".page-content"),this.$body=$("body")},e.prototype.toggle=function(t){return null!=t&&t.preventDefault(),this.$body.toggleClass("body--mobile-nav-open"),this._adjustContentHeight()},e.prototype.toggleSecondLevelSection=function(t){var e;return null!=t&&t.preventDefault(),e=$(t.target).closest(".global-nav__mobile-top-level-item"),this.$(".global-nav__mobile-top-level-item").not(e).removeClass("global-nav__mobile-top-level-item--expanded"),e.toggleClass("global-nav__mobile-top-level-item--expanded")},e.prototype.loadFreeCourses=function(){if(window.location.href=free_courses_link,window.location.href.split("#")[0]===free_courses_link.split("#")[0])return location.reload()},e.prototype._onResize=function(){if(this._adjustContentHeight(),!this.$el.is(":visible"))return this._close()},e.prototype._close=function(){return this.$body.removeClass("body--mobile-nav-open")},e.prototype._isOpen=function(){return this.$body.hasClass("body--mobile-nav-open")},e.prototype._adjustContentHeight=function(){return this._isOpen()?this.$pageContent.height($(window).height()-75):this.$pageContent.css("height","auto")},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.GlobalSearch=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"submit .global-nav__search-form":"perform_search","submit .inline-search__search-form":"perform_search","submit .global-nav__mobile-search":"perform_search"},e.prototype.initialize=function(){return this._initializeSearchAutocomplete(),this},e.prototype.perform_search=function(t){var e,n;return null!=t&&t.preventDefault(),e=$(t.target).find("#search_terms").val().trim(),n=t.target.action+"/"+e.replace(/\s+/g,"+"),document.location.href=n},e.prototype._initializeSearchAutocomplete=function(){return window.jo=this.$(".global-nav__search-terms"),this.$(".global-nav__search-terms").typeahead(null,{name:"search",displayKey:"name",source:this._bloodhound().ttAdapter()})},e.prototype._bloodhound=function(){return this.__bloodhound||(this.__bloodhound=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("name"),queryTokenizer:Bloodhound.tokenizers.whitespace,limit:10,prefetch:{cacheKey:"globalSearchBar",url:"/api/categories.json"}}),this.__bloodhound.initialize()),this.__bloodhound},e}(Backbone.View)}.call(this),"object"!=typeof JSON&&(JSON={}),function(){"use strict";function f(t){return t<10?"0"+t:t}function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,i,o,r,s,a=gap,u=e[t];switch(u&&"object"==typeof u&&"function"==typeof u.toJSON&&(u=u.toJSON(t)),"function"==typeof rep&&(u=rep.call(e,t,u)),typeof u){case"string":return quote(u);case"number":return isFinite(u)?String(u):"null";case"boolean":case"null":return String(u);case"object":if(!u)return"null";if(gap+=indent,s=[],"[object Array]"===Object.prototype.toString.apply(u)){for(r=u.length,n=0;n<r;n+=1)s[n]=str(n,u
)||"null";return o=0===s.length?"[]":gap?"[\n"+gap+s.join(",\n"+gap)+"\n"+a+"]":"["+s.join(",")+"]",gap=a,o}if(rep&&"object"==typeof rep)for(r=rep.length,n=0;n<r;n+=1)"string"==typeof rep[n]&&(o=str(i=rep[n],u))&&s.push(quote(i)+(gap?": ":":")+o);else for(i in u)Object.prototype.hasOwnProperty.call(u,i)&&(o=str(i,u))&&s.push(quote(i)+(gap?": ":":")+o);return o=0===s.length?"{}":gap?"{\n"+gap+s.join(",\n"+gap)+"\n"+a+"}":"{"+s.join(",")+"}",gap=a,o}}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var i;if(indent=gap="","number"==typeof n)for(i=0;i<n;i+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(t,e){var n,i,o=t[e];if(o&&"object"==typeof o)for(n in o)Object.prototype.hasOwnProperty.call(o,n)&&((i=walk(o,n))!==undefined?o[n]=i:delete o[n]);return reviver.call(t,e,o)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}(),function(t,i){"use strict";var e=t.History=t.History||{},o=t.jQuery;if("undefined"!=typeof e.Adapter)throw new Error("History.js Adapter has already been loaded...");e.Adapter={bind:function(t,e,n){o(t).bind(e,n)},trigger:function(t,e,n){o(t).trigger(e,n)},extractEventData:function(t,e,n){return e&&e.originalEvent&&e.originalEvent[t]||n&&n[t]||i},onDomLoad:function(t){o(t)}},"undefined"!=typeof e.init&&e.init()}(window),function(c){"use strict";var e=c.document,t=c.setTimeout||t,n=c.clearTimeout||n,a=c.setInterval||a,h=c.History=c.History||{};if("undefined"!=typeof h.initHtml4)throw new Error("History.js HTML4 Support has already been loaded...");h.initHtml4=function(){if("undefined"!=typeof h.initHtml4.initialized)return!1;h.initHtml4.initialized=!0,h.enabled=!0,h.savedHashes=[],h.isLastHash=function(t){return t===h.getHashByIndex()},h.isHashEqual=function(t,e){return(t=encodeURIComponent(t).replace(/%25/g,"%"))===(e=encodeURIComponent(e).replace(/%25/g,"%"))},h.saveHash=function(t){return!h.isLastHash(t)&&(h.savedHashes.push(t),!0)},h.getHashByIndex=function(t){return void 0===t?h.savedHashes[h.savedHashes.length-1]:t<0?h.savedHashes[h.savedHashes.length+t]:h.savedHashes[t]},h.discardedHashes={},h.discardedStates={},h.discardState=function(t,e,n){var i,o=h.getHashByState(t);return i={discardedState:t,backState:n,forwardState:e},h.discardedStates[o]=i,!0},h.discardHash=function(t,e,n){var i={discardedHash:t,backState:n,forwardState:e};return h.discardedHashes[t]=i,!0},h.discardedState=function(t){var e=h.getHashByState(t);return h.discardedStates[e]||!1},h.discardedHash=function(t){return h.discardedHashes[t]||!1},h.recycleState=function(t){var e=h.getHashByState(t);return h.discardedState(t)&&delete h.discardedStates[e],!0},h.emulated.hashChange&&(h.hashChangeInit=function(){h.checkerFunction=null;var t,n,i,o,r="",s=Boolean(h.getHash());return h.isInternetExplorer()?(t="historyjs-iframe",(n=e.createElement("iframe")).setAttribute("id",t),n.setAttribute("src","#"),n.style.display="none",e.body.appendChild(n),n.contentWindow.document.open(),n.contentWindow.document.close(),i="",o=!1,h.checkerFunction=function(){if(o)return!1;o=!0;var t=h.getHash(),e=h.getHash(n.contentWindow.document);return t!==r?(e!==(r=t)&&(i=e=t,n.contentWindow.document.open(),n.contentWindow.document.close(),n.contentWindow.document.location.hash=h.escapeHash(t)),h.Adapter.trigger(c,"hashchange")):e!==i&&(i=e,s&&""===e?h.back():h.setHash(e,!1)),!(o=!1)}):h.checkerFunction=function(){var t=h.getHash()||"";return t!==r&&(r=t,h.Adapter.trigger(c,"hashchange")),!0},h.intervalList.push(a(h.checkerFunction,h.options.hashChangeInterval)),!0},h.Adapter.onDomLoad(h.hashChangeInit)),h.emulated.pushState&&(h.onHashChange=function(t){var e,n=t&&t.newURL||h.getLocationHref(),i=h.getHashByUrl(n),o=null;return h.isLastHash(i)?(h.busy(!1),!1):(h.doubleCheckComplete(),h.saveHash(i),i&&h.isTraditionalAnchor(i)?(h.Adapter.trigger(c,"anchorchange"),h.busy(!1),!1):(o=h.extractState(h.getFullUrl(i||h.getLocationHref()),!0),h.isLastSavedState(o)?(h.busy(!1),!1):(h.getHashByState(o),(e=h.discardedState(o))?(h.getHashByIndex(-2)===h.getHashByState(e.forwardState)?h.back(!1):h.forward(!1),!1):(h.pushState(o.data,o.title,encodeURI(o.url),!1),!0))))},h.Adapter.bind(c,"hashchange",h.onHashChange),h.pushState=function(t,e,n,i){if(n=encodeURI(n).replace(/%25/g,"%"),h.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.pushState,args:arguments,queue:i}),!1;h.busy(!0);var o=h.createStateObject(t,e,n),r=h.getHashByState(o),s=h.getState(!1),a=h.getHashByState(s),u=h.getHash(),l=h.expectedStateId==o.id;return h.storeState(o),h.expectedStateId=o.id,h.recycleState(o),h.setTitle(o),r===a?(h.busy(!1),!1):(h.saveState(o),l||h.Adapter.trigger(c,"statechange"),h.isHashEqual(r,u)||h.isHashEqual(r,h.getShortUrl(h.getLocationHref()))||h.setHash(r,!1),h.busy(!1),!0)},h.replaceState=function(t,e,n,i){if(n=encodeURI(n).replace(/%25/g,"%"),h.getHashByUrl(n))throw new Error("History.js does not support states with fragment-identifiers (hashes/anchors).");if(!1!==i&&h.busy())return h.pushQueue({scope:h,callback:h.replaceState,args:arguments,queue:i}),!1;h.busy(!0);var o=h.createStateObject(t,e,n),r=h.getHashByState(o),s=h.getState(!1),a=h.getHashByState(s),u=h.getStateByIndex(-2);return h.discardState(s,o,u),r===a?(h.storeState(o),h.expectedStateId=o.id,h.recycleState(o),h.setTitle(o),h.saveState(o),h.Adapter.trigger(c,"statechange"),h.busy(!1)):h.pushState(o.data,o.title,o.url,!1),!0}),h.emulated.pushState&&h.getHash()&&!h.emulated.hashChange&&h.Adapter.onDomLoad(function(){h.Adapter.trigger(c,"hashchange")})},"undefined"!=typeof h.init&&h.init()}(window),function(s,e){"use strict";var l=s.console||e,c=s.document,n=s.navigator,o=s.sessionStorage||!1,r=s.setTimeout,a=s.clearTimeout,u=s.setInterval,h=s.clearInterval,p=s.JSON,d=s.alert,f=s.History=s.History||{},g=s.history;try{o.setItem("TEST","1"),o.removeItem("TEST")}catch(m){o=!1}if(p.stringify=p.stringify||p.encode,p.parse=p.parse||p.decode,"undefined"!=typeof f.init)throw new Error("History.js Core has already been loaded...");f.init=function(){return"undefined"!=typeof f.Adapter&&("undefined"!=typeof f.initCore&&f.initCore(),"undefined"!=typeof f.initHtml4&&f.initHtml4(),!0)},f.initCore=function(){if("undefined"!=typeof f.initCore.initialized)return!1;if(f.initCore.initialized=!0,f.options=f.options||{},f.options.hashChangeInterval=f.options.hashChangeInterval||100,f.options.safariPollInterval=f.options.safariPollInterval||500,f.options.doubleCheckInterval=f.options.doubleCheckInterval||500,f.options.disableSuid=f.options.disableSuid||!1,f.options.storeInterval=f.options.storeInterval||1e3,f.options.busyDelay=f.options.busyDelay||250,f.options.debug=f.options.debug||!1,f.options.initialTitle=f.options.initialTitle||c.title,f.options.html4Mode=f.options.html4Mode||!1,f.options.delayInit=f.options.delayInit||!1,f.intervalList=[],f.clearAllIntervals=function(){var t,e=f.intervalList;if(null!=e){for(t=0;t<e.length;t++)h(e[t]);f.intervalList=null}},f.debug=function(){f.options.debug&&f.log.apply(f,arguments)},f.log=function(t){var e,n,i,o,r,s=!(void 0===l||"undefined"==typeof l.log||"undefined"==typeof l.log.apply),a=c.getElementById("log");for(s?(e=(o=Array.prototype.slice.call(arguments)).shift(),"undefined"!=typeof l.debug?l.debug.apply(l,[e,o]):l.log.apply(l,[e,o])):e="\n"+t+"\n",n=1,i=arguments.length;n<i;++n){if("object"==typeof(r=arguments[n])&&void 0!==p)try{r=p.stringify(r)}catch(u){}e+="\n"+r+"\n"}return a?(a.value+=e+"\n-----\n",a.scrollTop=a.scrollHeight-a.clientHeight):s||d(e),!0},f.getInternetExplorerMajorVersion=function(){return f.getInternetExplorerMajorVersion.cached="undefined"!=typeof f.getInternetExplorerMajorVersion.cached?f.getInternetExplorerMajorVersion.cached:function(){for(var t=3,e=c.createElement("div"),n=e.getElementsByTagName("i");(e.innerHTML="<!--[if gt IE "+ ++t+"]><i></i><![endif]-->")&&n[0];);return 4<t&&t}()},f.isInternetExplorer=function(){return f.isInternetExplorer.cached="undefined"!=typeof f.isInternetExplorer.cached?f.isInternetExplorer.cached:Boolean(f.getInternetExplorerMajorVersion())},f.options.html4Mode?f.emulated={pushState:!0,hashChange:!0}:f.emulated={pushState:!Boolean(s.history&&s.history.pushState&&s.history.replaceState&&!(/ Mobile\/([1-7][a-z]|(8([abcde]|f(1[0-8]))))/i.test(n.userAgent)||/AppleWebKit\/5([0-2]|3[0-2])/i.test(n.userAgent))),hashChange:Boolean(!("onhashchange"in s||"onhashchange"in c)||f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8)},f.enabled=!f.emulated.pushState,f.bugs={setHash:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),safariPoll:Boolean(!f.emulated.pushState&&"Apple Computer, Inc."===n.vendor&&/AppleWebKit\/5([0-2]|3[0-3])/.test(n.userAgent)),ieDoubleCheck:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<8),hashEscape:Boolean(f.isInternetExplorer()&&f.getInternetExplorerMajorVersion()<7)},f.isEmptyObject=function(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0},f.cloneObject=function(t){var e,n;return t?(e=p.stringify(t),n=p.parse(e)):n={},n},f.getRootUrl=function(){var t=c.location.protocol+"//"+(c.location.hostname||c.location.host);return c.location.port&&(t+=":"+c.location.port),t+="/"},f.getBaseHref=function(){var t=c.getElementsByTagName("base"),e="";return 1===t.length&&(e=t[0].href.replace(/[^\/]+$/,"")),(e=e.replace(/\/+$/,""))&&(e+="/"),e},f.getBaseUrl=function(){return f.getBaseHref()||f.getBasePageUrl()||f.getRootUrl()},f.getPageUrl=function(){return((f.getState(!1,!1)||{}).url||f.getLocationHref()).replace(/\/+$/,"").replace(/[^\/]+$/,function(t){return/\./.test(t)?t:t+"/"})},f.getBasePageUrl=function(){return f.getLocationHref().replace(/[#\?].*/,"").replace(/[^\/]+$/,function(t){return/[^\/]$/.test(t)?"":t}).replace(/\/+$/,"")+"/"},f.getFullUrl=function(t,e){var n=t,i=t.substring(0,1);return e=void 0===e||e,/[a-z]+\:\/\//.test(t)||(n="/"===i?f.getRootUrl()+t.replace(/^\/+/,""):"#"===i?f.getPageUrl().replace(/#.*/,"")+t:"?"===i?f.getPageUrl().replace(/[\?#].*/,"")+t:e?f.getBaseUrl()+t.replace(/^(\.\/)+/,""):f.getBasePageUrl()+t.replace(/^(\.\/)+/,"")),n.replace(/\#$/,"")},f.getShortUrl=function(t){var e=t,n=f.getBaseUrl(),i=f.getRootUrl();return f.emulated.pushState&&(e=e.replace(n,"")),e=e.replace(i,"/"),f.isTraditionalAnchor(e)&&(e="./"+e),e=e.replace(/^(\.\/)+/g,"./").replace(/\#$/,"")},f.getLocationHref=function(t){return(t=t||c).URL===t.location.href?t.location.href:t.location.href===decodeURIComponent(t.URL)?t.URL:t.location.hash&&decodeURIComponent(t.location.href.replace(/^[^#]+/,""))===t.location.hash?t.location.href:-1==t.URL.indexOf("#")&&-1!=t.location.href.indexOf("#")?t.location.href:t.URL||t.location.href},f.store={},f.idToState=f.idToState||{},f.stateToId=f.stateToId||{},f.urlToId=f.urlToId||{},f.storedStates=f.storedStates||[],f.savedStates=f.savedStates||[],f.normalizeStore=function(){f.store.idToState=f.store.idToState||{},f.store.urlToId=f.store.urlToId||{},f.store.stateToId=f.store.stateToId||{}},f.getState=function(t,e){void 0===t&&(t=!0),void 0===e&&(e=!0);var n=f.getLastSavedState();return!n&&e&&(n=f.createStateObject()),t&&((n=f.cloneObject(n)).url=n.cleanUrl||n.url),n},f.getIdByState=function(t){var e,n=f.extractId(t.url);if(!n)if(e=f.getStateString(t),"undefined"!=typeof f.stateToId[e])n=f.stateToId[e];else if("undefined"!=typeof f.store.stateToId[e])n=f.store.stateToId[e];else{for(;n=(new Date).getTime()+String(Math.random()).replace(/\D/g,""),"undefined"!=typeof f.idToState[n]||"undefined"!=typeof f.store.idToState[n];);f.stateToId[e]=n,f.idToState[n]=t}return n},f.normalizeState=function(t){var e,n;return t&&"object"==typeof t||(t={}),"undefined"!=typeof t.normalized?t:(t.data&&"object"==typeof t.data||(t.data={}),(e={normalized:!0}).title=t.title||"",e.url=f.getFullUrl(t.url?t.url:f.getLocationHref()),e.hash=f.getShortUrl(e.url),e.data=f.cloneObject(t.data),e.id=f.getIdByState(e),e.cleanUrl=e.url.replace(/\??\&_suid.*/,""),e.url=e.cleanUrl,n=!f.isEmptyObject(e.data),(e.title||n)&&!0!==f.options.disableSuid&&(e.hash=f.getShortUrl(e.url).replace(/\??\&_suid.*/,""),/\?/.test(e.hash)||(e.hash+="?"),e.hash+="&_suid="+e.id),e.hashedUrl=f.getFullUrl(e.hash),(f.emulated.pushState||f.bugs.safariPoll)&&f.hasUrlDuplicate(e)&&(e.url=e.hashedUrl),e)},f.createStateObject=function(t,e,n){var i={data:t,title:e,url:n};return i=f.normalizeState(i)},f.getStateById=function(t){return t=String(t),f.idToState[t]||f.store.idToState[t]||e},f.getStateString=function(t){var e;return e={data:f.normalizeState(t).data,title:t.title,url:t.url},p.stringify(e)},f.getStateId=function(t){return f.normalizeState(t).id},f.getHashByState=function(t){return f.normalizeState(t).hash},f.extractId=function(t){var e,n;return n=-1!=t.indexOf("#")?t.split("#")[0]:t,(e=/(.*)\&_suid=([0-9]+)$/.exec(n))&&e[1]||t,(e?String(e[2]||""):"")||!1},f.isTraditionalAnchor=function(t){return!/[\/\?\.]/.test(t)},f.extractState=function(t,e){var n,i,o=null;return e=e||!1,(n=f.extractId(t))&&(o=f.getStateById(n)),o||(i=f.getFullUrl(t),(n=f.getIdByUrl(i)||!1)&&(o=f.getStateById(n)),o||!e||f.isTraditionalAnchor(t)||(o=f.createStateObject(null,null,i))),o},f.getIdByUrl=function(t){return f.urlToId[t]||f.store.urlToId[t]||e},f.getLastSavedState=function(){return f.savedStates[f.savedStates.length-1]||e},f.getLastStoredState=function(){return f.storedStates[f.storedStates.length-1]||e},f.hasUrlDuplicate=function(t){var e;return(e=f.extractState(t.url))&&e.id!==t.id},f.storeState=function(t){return f.urlToId[t.url]=t.id,f.storedStates.push(f.cloneObject(t)),t},f.isLastSavedState=function(t){var e=!1;return f.savedStates.length&&(e=t.id===f.getLastSavedState().id),e},f.saveState=function(t){return!f.isLastSavedState(t)&&(f.savedStates.push(f.cloneObject(t)),!0)},f.getStateByIndex=function(t){return void 0===t?f.savedStates[f.savedStates.length-1]:t<0?f.savedStates[f.savedStates.length+t]:f.savedStates[t]},f.getCurrentIndex=function(){return f.savedStates.length<1?0:f.savedStates.length-1},f.getHash=function(t){var e=f.getLocationHref(t);return f.getHashByUrl(e)},f.unescapeHash=function(t){var e=f.normalizeHash(t);return e=decodeURIComponent(e)},f.normalizeHash=function(t){return t.replace(/[^#]*#/,"").replace(/#.*/,"")},f.setHash=function(t,e){var n,i;return!1!==e&&f.busy()?(f.pushQueue({scope:f,callback:f.setHash,args:arguments,queue:e}),!1):(f.busy(!0),(n=f.extractState(t,!0))&&!f.emulated.pushState?f.pushState(n.data,n.title,n.url,!1):f.getHash()!==t&&(f.bugs.setHash?(i=f.getPageUrl(),f.pushState(null,null,i+"#"+t,!1)):c.location.hash=t),f)},f.escapeHash=function(t){var e=f.normalizeHash(t);return e=s.encodeURIComponent(e),f.bugs.hashEscape||(e=e.replace(/\%21/g,"!").replace(/\%26/g,"&").replace(/\%3D/g,"=").replace(/\%3F/g,"?")),e},f.getHashByUrl=function(t){var e=String(t).replace(/([^#]*)#?([^#]*)#?(.*)/,"$2");return e=f.unescapeHash(e)},f.setTitle=function(t){var e,n=t.title;n||(e=f.getStateByIndex(0))&&e.url===t.url&&(n=e.title||f.options.initialTitle);try{c.getElementsByTagName("title")[0].innerHTML=n.replace("<","&lt;").replace(">","&gt;").replace(" & "," &amp; ")}catch(i){}return c.title=n,f},f.queues=[],f.busy=function(t){if(void 0!==t?f.busy.flag=t:"undefined"==typeof f.busy.flag&&(f.busy.flag=!1),!f.busy.flag){a(f.busy.timeout);var i=function(){var t,e,n;if(!f.busy.flag)for(t=f.queues.length-1;0<=t;--t)0!==(e=f.queues[t]).length&&(n=e.shift(),f.fireQueueItem(n),f.busy.timeout=r(i,f.options.busyDelay))};f.busy.timeout=r(i,f.options.busyDelay)}return f.busy.flag},f.busy.flag=!1,f.fireQueueItem=function(t){return t.callback.apply(t.scope||f,t.args||[])},f.pushQueue=function(t){return f.queues[t.queue||0]=f.queues[t.queue||0]||[],f.queues[t.queue||0].push(t),f},f.queue=function(t,e){return"function"==typeof t&&(t={callback:t}),void 0!==e&&(t.queue=e),f.busy()?f.pushQueue(t):f.fireQueueItem(t),f},f.clearQueue=function(){return f.busy.flag=!1,f.queues=[],f},f.stateChanged=!1,f.doubleChecker=!1,f.doubleCheckComplete=function(){return f.stateChanged=!0,f.doubleCheckClear(),f},f.doubleCheckClear=function(){return f.doubleChecker&&(a(f.doubleChecker),f.doubleChecker=!1),f},f.doubleCheck=function(t){return f.stateChanged=!1,f.doubleCheckClear(),f.bugs.ieDoubleCheck&&(f.doubleChecker=r(function(){return f.doubleCheckClear(),f.stateChanged||t(),!0},f.options.doubleCheckInterval)),f},f.safariStatePoll=function(){var t=f.extractState(f.getLocationHref());if(!f.isLastSavedState(t))return t||f.createStateObject(),f.Adapter.trigger(s,"popstate"),f},f.back=function(t){return!1!==t&&f.busy()?(f.pushQueue({scope:f,callback:f.back,args:arguments,queue:t}),!1):(f.busy(!0),f.doubleCheck(function(){f.back(!1)}),g.go(-1),!0)},f.forward=function(t){return!1!==t&&f.busy()?(f.pushQueue({scope:f,callback:f.forward,args:arguments,queue:t}),!1):(f.busy(!0),f.doubleCheck(function(){f.forward(!1)}),g.go(1),!0)},f.go=function(t,e){var n;if(0<t)for(n=1;n<=t;++n)f.forward(e);else{if(!(t<0))throw new Error("History.go: History.go requires a positive or negative integer passed.");for(n=-1;t<=n;--n)f.back(e)}return f},f.emulated.pushState){var t=function(){};f.pushState=f.pushState||t,f.replaceState=f.replaceState||t}else f.onPopState=function(t,e){var n,i,o=!1,r=!1;return f.doubleCheckComplete(),(n=f.getHash())?((i=f.extractState(n||f.getLocationHref(),!0))?f.replaceState(i.data,i.title,i.url,!1):(f.Adapter.trigger(s,"anchorchange"),f.busy(!1)),f.expectedStateId=!1):((r=(o=f.Adapter.extractEventData("state",t,e)||!1)?f.getStateById(o):f.expectedStateId?f.getStateById(f.expectedStateId):f.extractState(f.getLocationHref()))||(r=f.createStateObject(null,null,f.getLocationHref())),f.expectedStateId=!1,f.isLastSavedState(r)?(f.busy(!1),!1):(f.storeState(r),f.saveState(r),f.setTitle(r),f.Adapter.trigger(s,"statechange"),f.busy(!1),!0))},f.Adapter.bind(s,"popstate",f.onPopState),f.pushState=function(t,e,n,i){if(f.getHashByUrl(n)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&f.busy())return f.pushQueue({scope:f,callback:f.pushState,args:arguments,queue:i}),!1;f.busy(!0);var o=f.createStateObject(t,e,n);return f.isLastSavedState(o)?f.busy(!1):(f.storeState(o),f.expectedStateId=o.id,g.pushState(o.id,o.title,o.url),f.Adapter.trigger(s,"popstate")),!0},f.replaceState=function(t,e,n,i){if(f.getHashByUrl(n)&&f.emulated.pushState)throw new Error("History.js does not support states with fragement-identifiers (hashes/anchors).");if(!1!==i&&f.busy())return f.pushQueue({scope:f,callback:f.replaceState,args:arguments,queue:i}),!1;f.busy(!0);var o=f.createStateObject(t,e,n);return f.isLastSavedState(o)?f.busy(!1):(f.storeState(o),f.expectedStateId=o.id,g.replaceState(o.id,o.title,o.url),f.Adapter.trigger(s,"popstate")),!0};if(o){try{f.store=p.parse(o.getItem("History.store"))||{}}catch(i){f.store={}}f.normalizeStore()}else f.store={},f.normalizeStore();f.Adapter.bind(s,"unload",f.clearAllIntervals),f.saveState(f.storeState(f.extractState(f.getLocationHref(),!0))),o&&(f.onUnload=function(){var t,e,n;try{t=p.parse(o.getItem("History.store"))||{}}catch(i){t={}}for(e in t.idToState=t.idToState||{},t.urlToId=t.urlToId||{},t.stateToId=t.stateToId||{},f.idToState)f.idToState.hasOwnProperty(e)&&(t.idToState[e]=f.idToState[e]);for(e in f.urlToId)f.urlToId.hasOwnProperty(e)&&(t.urlToId[e]=f.urlToId[e]);for(e in f.stateToId)f.stateToId.hasOwnProperty(e)&&(t.stateToId[e]=f.stateToId[e]);f.store=t,f.normalizeStore(),n=p.stringify(t);try{o.setItem("History.store",n)}catch(m){if(m.code!==DOMException.QUOTA_EXCEEDED_ERR)throw m;o.length&&(o.removeItem("History.store"),o.setItem("History.store",n))}},f.intervalList.push(u(f.onUnload,f.options.storeInterval)),f.Adapter.bind(s,"beforeunload",f.onUnload),f.Adapter.bind(s,"unload",f.onUnload)),f.emulated.pushState||(f.bugs.safariPoll&&f.intervalList.push(u(f.safariStatePoll,f.options.safariPollInterval)),"Apple Computer, Inc."!==n.vendor&&"Mozilla"!==(n.appCodeName||"")||(f.Adapter.bind(s,"hashchange",function(){f.Adapter.trigger(s,"popstate")}),f.getHash()&&f.Adapter.onDomLoad(function(){f.Adapter.trigger(s,"hashchange")})))},f.options&&f.options.delayInit||f.init()}(window),function(u,l){var c;u.rails!==l&&u.error("jquery-ujs has already been loaded!");var t=u(document);u.rails=c={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(t){var e=u('meta[name="csrf-token"]').attr("content");e&&t.setRequestHeader("X-CSRF-Token",e)},refreshCSRFTokens:function(){var t=u("meta[name=csrf-token]").attr("content"),e=u("meta[name=csrf-param]").attr("content");u('form input[name="'+e+'"]').val(t)},fire:function(t,e,n){var i=u.Event(e);return t.trigger(i,n),!1!==i.result},confirm:function(t){return confirm(t)},ajax:function(t){return u.ajax(t)},href:function(t){return t[0].href},handleRemote:function(i){var t,e,n,o,r,s;if(c.fire(i,"ajax:before")){if(o=i.data("with-credentials")||null,r=i.data("type")||u.ajaxSettings&&u.ajaxSettings.dataType,i.is("form")){t=i.attr("method"),e=i.attr("action"),n=i.serializeArray();var a=i.data("ujs:submit-button");a&&(n.push(a),i.data("ujs:submit-button",null))}else i.is(c.inputChangeSelector)?(t=i.data("method"),e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):i.is(c.buttonClickSelector)?(t=i.data("method")||"get",e=i.data("url"),n=i.serialize(),i.data("params")&&(n=n+"&"+i.data("params"))):(t=i.data("method"),e=c.href(i),n=i.data("params")||null);return s={type:t||"GET",data:n,dataType:r,beforeSend:function(t,e){if(e.dataType===l&&t.setRequestHeader("accept","*/*;q=0.5, "+e.accepts.script),!c.fire(i,"ajax:beforeSend",[t,e]))return!1;i.trigger("ajax:send",t)},success:function(t,e,n){i.trigger("ajax:success",[t,e,n])},complete:function(t,e){i.trigger("ajax:complete",[t,e])},error:function(t,e,n){i.trigger("ajax:error",[t,e,n])},crossDomain:c.isCrossDomain(e)},o&&(s.xhrFields={withCredentials:o}),e&&(s.url=e),c.ajax(s)}return!1},isCrossDomain:function(t){var e=document.createElement("a");e.href=location.href;var n=document.createElement("a");try{return n.href=t,n.href=n.href,!n.protocol||!n.host||e.protocol+"//"+e.host!=n.protocol+"//"+n.host}catch(i){return!0}},handleMethod:function(t){var e=c.href(t),n=t.data("method"),i=t.attr("target"),o=u("meta[name=csrf-token]").attr("content"),r=u("meta[name=csrf-param]").attr("content"),s=u('<form method="post" action="'+e+'"></form>'),a='<input name="_method" value="'+n+'" type="hidden" />';r===l||o===l||c.isCrossDomain(e)||(a+='<input name="'+r+'" value="'+o+'" type="hidden" />'),i&&s.attr("target",i),s.hide().append(a).appendTo("body"),s.submit()},formElements:function(t,e){return t.is("form")?u(t[0].elements).filter(e):t.find(e)},disableFormElements:function(t){c.formElements(t,c.disableSelector).each(function(){c.disableFormElement(u(this))})},disableFormElement:function(t){var e,n;e=t.is("button")?"html":"val",n=t.data("disable-with"),t.data("ujs:enable-with",t[e]()),n!==l&&t[e](n),t.prop("disabled",!0)},enableFormElements:function(t){c.formElements(t,c.enableSelector).each(function(){c.enableFormElement(u(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,n=t.data("confirm"),i=!1;return!n||(c.fire(t,"confirm")&&(i=c.confirm(n),e=c.fire(t,"confirm:complete",[i])),i&&e)},blankInputs:function(t,e,n){var i,o=u(),r=e||"input,textarea",s=t.find(r);return s.each(function(){if(i=u(this),!(i.is("input[type=checkbox],input[type=radio]")?i.is(":checked"):i.val())==!n){if(i.is("input[type=radio]")&&s.filter('input[type=radio]:checked[name="'+i.attr("name")+'"]').length)return!0;o=o.add(i)}}),!!o.length&&o},nonBlankInputs:function(t,e){return c.blankInputs(t,e,!0)},stopEverything:function(t){return u(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(t){var e=t.data("disable-with");t.data("ujs:enable-with",t.html()),e!==l&&t.html(e),t.bind("click.railsDisable",function(t){return c.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==l&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},c.fire(t,"rails:attachBindings")&&(u.ajaxPrefilter(function(t,e,n){t.crossDomain||c.CSRFProtection(n)}),u(window).on("pageshow.rails",function(){u(u.rails.enableSelector).each(function(){var t=u(this);t.data("ujs:enable-with")&&u.rails.enableFormElement(t)}),u(u.rails.linkDisableSelector).each(function(){var t=u(this);t.data("ujs:enable-with")&&u.rails.enableElement(t)})}),t.delegate(c.linkDisableSelector,"ajax:complete",function(){c.enableElement(u(this))}),t.delegate(c.buttonDisableSelector,"ajax:complete",function(){c.enableFormElement(u(this))}),t.delegate(c.linkClickSelector,"click.rails",function(t){var e=u(this),n=e.data("method"),i=e.data("params"),o=t.metaKey||t.ctrlKey;if(!c.allowAction(e))return c.stopEverything(t);if(!o&&e.is(c.linkDisableSelector)&&c.disableElement(e),e.data("remote")===l)return n?(c.handleMethod(e),!1):void 0;if(o&&(!n||"GET"===n)&&!i)return!0;var r=c.handleRemote(e);return!1===r?c.enableElement(e):r.fail(function(){c.enableElement(e)}),!1}),t.delegate(c.buttonClickSelector,"click.rails",function(t){var e=u(this);if(!c.allowAction(e))return c.stopEverything(t);e.is(c.buttonDisableSelector)&&c.disableFormElement(e);var n=c.handleRemote(e);return!1===n?c.enableFormElement(e):n.fail(function(){c.enableFormElement(e)}),!1}),t.delegate(c.inputChangeSelector,"change.rails",function(t){var e=u(this);return c.allowAction(e)?(c.handleRemote(e),!1):c.stopEverything(t)}),t.delegate(c.formSubmitSelector,"submit.rails",function(t){var e,n,i=u(this),o=i.data("remote")!==l;if(!c.allowAction(i))return c.stopEverything(t);if(i.attr("novalidate")==l&&(e=c.blankInputs(i,c.requiredInputSelector))&&c.fire(i,"ajax:aborted:required",[e]))return c.stopEverything(t);if(o){if(n=c.nonBlankInputs(i,c.fileInputSelector)){setTimeout(function(){c.disableFormElements(i)},13);var r=c.fire(i,"ajax:aborted:file",[n]);return r||setTimeout(function(){c.enableFormElements(i)},13),r}return c.handleRemote(i),!1}setTimeout(function(){c.disableFormElements(i)},13)}),t.delegate(c.formInputClickSelector,"click.rails",function(t){var e=u(this);if(!c.allowAction(e))return c.stopEverything(t);var n=e.attr("name"),i=n?{name:n,value:e.val()}:null;e.closest("form").data("ujs:submit-button",i)}),t.delegate(c.formSubmitSelector,"ajax:send.rails",function(t){this==t.target&&c.disableFormElements(u(this))}),t.delegate(c.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&c.enableFormElements(u(this))}),u(function(){c.refreshCSRFTokens()}))}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"==typeof exports?require("jquery"):jQuery)}(function(k){var T,t=navigator.userAgent,A=/iphone/i.test(t),I=/chrome/i.test(t),H=/android/i.test(t);k.mask={definitions:{9:"[0-9]",a:"[A-Za-z]","*":"[A-Za-z0-9]"},autoclear:!0,dataName:"rawMaskFn",placeholder:"_"},k.fn.extend({caret:function(t,e){var n;if(0!==this.length&&!this.is(":hidden"))return"number"==typeof t?(e="number"==typeof e?e:t,this.each(function(){this.setSelectionRange?this.setSelectionRange(t,e):this.createTextRange&&((n=this.createTextRange()).collapse(!0),n.moveEnd("character",e),n.moveStart("character",t),n.select())})):(this[0].setSelectionRange?(t=this[0].selectionStart,e=this[0].selectionEnd):document.selection&&document.selection.createRange&&(n=document.selection.createRange(),t=0-n.duplicate().moveStart("character",-1e5),e=t+n.text.length),{begin:t,end:e})},unmask:function(){return this.trigger("unmask")},mask:function(i,b){var o,_,w,S,C,x,E;if(!i&&0<this.length){var t=k(this[0]).data(k.mask.dataName);return t?t():void 0}return b=k.extend({autoclear:k.mask.autoclear,placeholder:k.mask.placeholder,completed:null},b),o=k.mask.definitions,_=[],w=x=i.length,S=null,k.each(i.split(""),function(t,e){"?"==e?(x--,w=t):o[e]?(_.push(new RegExp(o[e])),null===S&&(S=_.length-1),t<w&&(C=_.length-1)):_.push(null)}),this.trigger("unmask").each(function(){function s(){if(b.completed){for(var t=S;t<=C;t++)if(_[t]&&m[t]===a(t))return;b.completed.call(g)}}function a(t){return b.placeholder.charAt(t<b.placeholder.length?t:0)}function u(t){for(;++t<x&&!_[t];);return t}function r(t){for(;0<=--t&&!_[t];);return t}function l(t,e){var n,i;if(!(t<0)){for(n=t,i=u(e);n<x;n++)if(_[n]){if(!(i<x&&_[n].test(m[i])))break;m[n]=m[i],m[i]=a(i),i=u(i)}d(),g.caret(Math.max(S,t))}}function c(t){var e,n,i,o;for(n=a(e=t);e<x;e++)if(_[e]){if(i=u(e),o=m[e],m[e]=n,!(i<x&&_[i].test(o)))break;n=o}}function t(){var t=g.val(),e=g.caret();if(E&&E.length&&E.length>t.length){for(f(!0);0<e.begin&&!_[e.begin-1];)e.begin--;if(0===e.begin)for(;e.begin<S&&!_[e.begin];)e.begin++;g.caret(e.begin,e.begin)}else{for(f(!0);e.begin<x&&!_[e.begin];)e.begin++;g.caret(e.begin,e.begin)}s()}function h(){f(),g.val()!=v&&g.change()}function e(t){if(!g.prop("readonly")){var e,n,i,o=t.which||t.keyCode;E=g.val(),8===o||46===o||A&&127===o?(n=(e=g.caret()).begin,(i=e.end)-n==0&&(n=46!==o?r(n):i=u(n-1),i=46===o?u(i):i),p(n,i),l(n,i-1),t.preventDefault()):13===o?h.call(this,t):27===o&&(g.val(v),g.caret(0,f()),t.preventDefault())}}function n(t){if(!g.prop("readonly")){var e,n,i,o=t.which||t.keyCode,r=g.caret();if(!(t.ctrlKey||t.altKey||t.metaKey||o<32)&&o&&13!==o){if(r.end-r.begin!=0&&(p(r.begin,r.end),l(r.begin,r.end-1)),(e=u(r.begin-1))<x&&(n=String.fromCharCode(o),_[e].test(n))){if(c(e),m[e]=n,d(),i=u(e),H)setTimeout(function(){k.proxy(k.fn.caret,g,i)()},0);else g.caret(i);r.begin<=C&&s()}t.preventDefault()}}}function p(t,e){var n;for(n=t;n<e&&n<x;n++)_[n]&&(m[n]=a(n))}function d(){g.val(m.join(""))}function f(t){var e,n,i,o=g.val(),r=-1;for(i=e=0;e<x;e++)if(_[e]){for(m[e]=a(e);i++<o.length;)if(n=o.charAt(i-1),_[e].test(n)){m[e]=n,r=e;break}if(i>o.length){p(e+1,x);break}}else m[e]===o.charAt(i)&&i++,e<w&&(r=e);return t?d():r+1<w?b.autoclear||m.join("")===y?(g.val()&&g.val(""),p(0,x)):d():(d(),g.val(g.val().substring(0,r+1))),w?e:S}var g=k(this),m=k.map(i.split(""),function(t,e){
return"?"!=t?o[t]?a(e):t:void 0}),y=m.join(""),v=g.val();g.data(k.mask.dataName,function(){return k.map(m,function(t,e){return _[e]&&t!=a(e)?t:null}).join("")}),g.one("unmask",function(){g.off(".mask").removeData(k.mask.dataName)}).on("focus.mask",function(){var t;g.prop("readonly")||(clearTimeout(T),v=g.val(),t=f(),T=setTimeout(function(){g.get(0)===document.activeElement&&(d(),t==i.replace("?","").length?g.caret(0,t):g.caret(t))},10))}).on("blur.mask",h).on("keydown.mask",e).on("keypress.mask",n).on("input.mask paste.mask",function(){g.prop("readonly")||setTimeout(function(){var t=f(!0);g.caret(t),s()},0)}),I&&H&&g.off("input.mask").on("input.mask",t),f()})}})}),function(){_.mixin({isBlank:function(t){return null==t||""===t||t===[]},isPresent:function(t){return!_.isBlank(t)},presence:function(t){if(!_.isBlank(t))return t}})}.call(this),function(){var n,i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e}(Backbone.Model),window.Subgroup=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.events={keydown:"keydownHandler","click    .subgroup__edit-form-link":"enableNameEditing","click    .subgroup__save-form-link":"onNameFormSubmit","submit   .subgroup__name-form":"onNameFormSubmit"},e.prototype.initialize=function(){return this._initializeProperties(),this._initializeState(),$(".subgroup__active-subgroup-membership-count-limit-field").mask("9?999",{placeholder:" "})},e.prototype._initializeProperties=function(){return this.properties={subgroupId:this.$el.data("subgroup-id")}},e.prototype._initializeState=function(){return this.state=new n(this.initialState()),this.state.on("change",this.updateForm,this),this.updateForm()},e.prototype.initialState=function(){return{formSubmitting:!1,subgroupName:this.$el.data("original-subgroup-name"),activeSubgroupMembershipCountLimit:this.$el.data("original-subgroup-membership-limit"),editing:!1,errorMessage:this.$(".subgroup__error").text().trim(),errorFields:[]}},e.prototype.updateForm=function(){return this.setSubgroupName(this.state.get("subgroupName")),this.setSubgroupMembershipCountLimit(this.state.get("activeSubgroupMembershipCountLimit")),this.toggleSubgroupEditability(this.state.get("editing")),this.toggleErrors(this.state.get("errorMessage"),this.state.get("errorFields"))},e.prototype.onNameFormSubmit=function(t){return null!=t&&t.preventDefault(),this.validateAndSaveSubgroup()},e.prototype.validateAndSaveSubgroup=function(){return this.state.get("subgroupName")===this.subgroupName().val()&&this.state.get("activeSubgroupMembershipCountLimit")===this.activeSubgroupMembershipCountLimit().val()?this.state.set({errorMessage:null,errorFields:[],editing:!1}):this.saveForm()},e.prototype.saveForm=function(){return $.ajax({url:"/group_account/subgroups/"+this.properties.subgroupId,type:"PUT",dataType:"json",data:{group_account_subgroup:{name:this.subgroupName().val(),active_subgroup_membership_count_limit:_.presence(this.activeSubgroupMembershipCountLimit().val())}}}).done((n=this,function(t){return n.state.set({subgroupName:t.name,activeSubgroupMembershipCountLimit:t.active_subgroup_membership_count_limit,errorMessage:null,errorFields:[],editing:!1})})).fail((e=this,function(t){return e.state.set({errorMessage:t.responseJSON.error||"Encountered an unknown error: unable to save subgroup",errorFields:[],editing:!0})}));var e,n},e.prototype.enableNameEditing=function(t){return null!=t&&t.preventDefault(),this.state.set({editing:!0})},e.prototype.cancelSubgroupNameEdit=function(){return this.state.set({errorMessage:null,errorFields:[],editing:!1})},e.prototype.toggleErrors=function(t){return this.$(".subgroup_error-message").html(t),this.$(".subgroup__error").toggleClass("subgroup__error--shown",!!t)},e.prototype.toggleSubgroupEditability=function(t){if(this.$(".subgroup__field-label").toggleClass("subgroup__field-label--shown",!this.state.get("editing")),this.$(".subgroup__edit-field").toggleClass("subgroup__edit-field--shown",!!this.state.get("editing")),this.$(".subgroup__active-subgroup-membership-count-limit-warning").toggleClass("subgroup__active-subgroup-membership-count-limit-warning--shown",!!this.state.get("editing")),t)return this.subgroupName().focus(),this.subgroupName().val(this.subgroupName().val())},e.prototype.setSubgroupName=function(t){return this.$(".subgroup__name-content").html(t)},e.prototype.setSubgroupMembershipCountLimit=function(t){return this.$(".subgroup__active-subgroup-membership-count-limit-content").html(t||"\u221e")},e.prototype.keydownHandler=function(t){switch(t.which){case 27:return this.cancelSubgroupNameEdit()}},e.prototype.subgroupName=function(){return this._subgroupName=this.$(".subgroup__subgroup-name-field")},e.prototype.activeSubgroupMembershipCountLimit=function(){return this._activeSubgroupMembershipCountLimit=this.$(".subgroup__active-subgroup-membership-count-limit-field")},e}(Backbone.View)}.call(this),function(_){function e(t){var f=_(this),g=null,m=[],y=null,n=null,v=_.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:_.noop,exit:_.noop,activate:_.noop,deactivate:_.noop,exitMenu:_.noop},t),e=3,b=300,i=function(t){m.push({x:t.pageX,y:t.pageY}),m.length>e&&m.shift()},o=function(){n&&clearTimeout(n),v.exitMenu(this)&&(g&&v.deactivate(g),g=null)},r=function(){n&&clearTimeout(n),v.enter(this),l(this)},s=function(){v.exit(this)},a=function(){u(this)},u=function(t){t!=g&&(g&&v.deactivate(g),v.activate(t),g=t)},l=function(t){var e=c();e?n=setTimeout(function(){l(t)},e):u(t)},c=function(){function t(t,e){return(e.y-t.y)/(e.x-t.x)}if(!g||!_(g).is(v.submenuSelector))return 0;var e=f.offset(),n={x:e.left,y:e.top-v.tolerance},i={x:e.left+f.outerWidth(),y:n.y},o={x:e.left,y:e.top+f.outerHeight()+v.tolerance},r={x:e.left+f.outerWidth(),y:o.y},s=m[m.length-1],a=m[0];if(!s)return 0;if(a||(a=s),a.x<e.left||a.x>r.x||a.y<e.top||a.y>r.y)return 0;if(y&&s.x==y.x&&s.y==y.y)return 0;var u=i,l=r;"left"==v.submenuDirection?(u=o,l=n):"below"==v.submenuDirection?(u=r,l=o):"above"==v.submenuDirection&&(u=n,l=i);var c=t(s,u),h=t(s,l),p=t(a,u),d=t(a,l);return c<p&&d<h?(y=s,b):(y=null,0)};f.mouseleave(o).find(v.rowSelector).mouseenter(r).mouseleave(s).click(a),_(document).mousemove(i)}_.fn.menuAim=function(t){return this.each(function(){e.call(this,t)}),this}}(jQuery),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.TopicsMenu=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(){return this.$topics=this.$(".topics-menu__topics"),this._initializeMenuAim()},e.prototype.activateTopic=function(t){return this.$topics.addClass("topics-menu__topics--expanded"),this._toggleTopic(t,"addClass")},e.prototype.deactivateTopic=function(t){return this._toggleTopic(t,"removeClass")},e.prototype._submenuForTopic=_.memoize(function(t){return this.$(".topics-menu__topic-submenu.topic-"+t)}),e.prototype._topics=function(){return $(".topics-menu__topics")},e.prototype._initializeMenuAim=function(){return this._topics().menuAim({activate:_.bind(this.activateTopic,this),deactivate:_.bind(this.deactivateTopic,this),tolerance:850}),this.activateTopic(this._topics().children()[0],"addClass")},e.prototype._toggleTopic=function(t,e){var n,i;return i=(n=$(t)).data("slug"),this._submenuForTopic(i)[e]("topics-menu__topic-submenu--visible"),n.find(".topics-menu__topic-link")[e]("topics-menu__topic-link--active"),n.find(".topics-menu__topic-link-chevron")[e]("topics-menu__topic-link-chevron--active")},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.ElementsSignUpModal=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(){var t;return t=$("#sign_up_modal"),this._bindOpenSignUpModalEvent(t),this._bindCloseSignUpModalEvent(t)},e.prototype._bindOpenSignUpModalEvent=function(t){return $(".elements-subscribe-btn").click(function(){return t.removeClass("hidden"),t.addClass("show")})},e.prototype._bindCloseSignUpModalEvent=function(e){return $("#sign_up_modal_close").click(function(){return e.removeClass("show"),e.addClass("hidden")}),window.onclick=function(t){t.target===document.getElementById("sign_up_modal")&&(e.removeClass("show"),e.addClass("hidden"))}},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.QuickLinks=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click .js-quick-links__toggle":"toggleQuickLinks"},e.prototype.toggleQuickLinks=function(t){return null!=t&&t.preventDefault(),$(t.target).closest(".quick-links").toggleClass("quick-links__collapsed")},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.PageFooter=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click .page-footer__links-column-expansion-link":"toggleFooterSection"},e.prototype.toggleFooterSection=function(t){return null!=t&&t.preventDefault(),$(t.target).closest(".page-footer__section").toggleClass("page-footer__section--expanded"),this},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.GridGuides=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click .grid-guides__toggle":"toggle"},e.prototype.initialize=function(){return this.$toggle=this.$(".grid-guides__toggle"),this.$guides=this.$(".grid-guides__guides"),this.$lines=this.$(".grid-guides__lines"),$(window).on("resize",_.bind(this.resetLines,this)),this.resetLines(),this.$toggle.show()},e.prototype.toggle=function(t){return t.preventDefault(),this.$guides.toggleClass("grid-guides__guides--active"),this.$lines.toggleClass("grid-guides__lines--active"),this.$toggle.toggleClass("grid-guides__toggle--active")},e.prototype.resetLines=function(){var t,e,n;for(this.$lines.empty(),n=[],t=1,e=Math.floor(this.largerHeight()/this.baseLineHeight());1<=e?t<=e:e<=t;1<=e?++t:--t)n.push(this.$lines.append('<div class="grid-guides__line">'));return n},e.prototype.largerHeight=function(){return _.max([$("body").outerHeight(),$("html").outerHeight()])},e.prototype.baseLineHeight=_.memoize(function(){return parseInt($("body").css("line-height"),10)}),e}(Backbone.View)}.call(this),function(){}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.IntroductoryText=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"click #introductory-text__read-more-link":"toggleReadMode","click #introductory-text__read-less-link":"toggleReadMode"},e.prototype.initialize=function(){return this._maxHeightInReadLessMode=100,this._$introductoryTextContent=$("#introductory-text__content"),this._$introductoryTextLinksDivider=$("#introductory-text__links-divider"),this._$introductoryTextReadMoreLink=$("#introductory-text__read-more-link"),this._$introductoryTextReadLessLink=$("#introductory-text__read-less-link"),this._introductoryTextActualHeight=this._$introductoryTextContent[0].scrollHeight,this._introductoryTextActualHeight>this._maxHeightInReadLessMode?this._$introductoryTextReadMoreLink.toggleClass("show"):([this._$introductoryTextLinksDivider,this._$introductoryTextReadMoreLink,this._$introductoryTextReadLessLink].forEach(function(t){return t.remove()}),this._$introductoryTextContent.removeClass("show-less"))},e.prototype._getIntroductoryTextHeight=function(){return this._$introductoryTextContent.height()===this._maxHeightInReadLessMode?this._introductoryTextActualHeight:this._maxHeightInReadLessMode},e.prototype.toggleReadMode=function(){return this._$introductoryTextContent.animate({"max-height":this._getIntroductoryTextHeight()},"slow"),[this._$introductoryTextLinksDivider,this._$introductoryTextReadMoreLink,this._$introductoryTextReadLessLink].forEach(function(t){return t.toggleClass("show")})},e}(Backbone.View)}.call(this),function(){var n=function(t,e){return function(){return t.apply(e,arguments)}},i=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.SectionHeader=function(t){function e(){return this.hideAll=n(this.hideAll,this),e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.menuClass=".section-header__menu",e.prototype.events={"click .section-header__menu-toggle":"displayMenu"},e.prototype.initialize=function(){return this.hideAll(),$("body").on("click",this.hideAll)},e.prototype.displayMenu=function(t){var e,n;if(null!=t&&t.preventDefault(),null!=t&&t.stopPropagation(),e=(n=$(t.currentTarget).closest(this.menuClass)).hasClass("open-popup"),this.hideAll(),!e)return n.addClass("open-popup")},e.prototype.hideAll=function(){return $(this.menuClass).removeClass("open-popup")},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.PopupMenu=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(){return new Drop({target:this.$(".popup-menu-toggle")[0],content:this.$(".popup-menu-content").html(),position:"left middle",classes:"drop-theme-arrows-bounce"})},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.SearchTopicSwitcher=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={"change .multi_search__topics":"changeSearchTopic"},e.prototype.changeSearchTopic=function(t){var e;return e=t.currentTarget,window.location.href=e.options[e.selectedIndex].value},e}(Backbone.View)}.call(this),function(){}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.CategorySidebarAdMobile=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.MOBILE_VIEW_BREAKPOINT=480,e.prototype.initialize=function(){return this._insertSidebarAdsForMobileView()},e.prototype._insertSidebarAdsForMobileView=function(){var t,e;return $(window).width()>this.MOBILE_VIEW_BREAKPOINT?($(".category_sidebar_ad_mobile").detach(),$(".sticky-ad-mobile").detach()):(t=$(".category_sidebar_ad_mobile"),this._elementToInsertAfter(this._adPlacementListCount()).after(t.show().css("margin-top","30px")),e=$(".sticky-ad-mobile"),this._elementToInsertAfter(this._numberOfListElements()-1).after(e.show().css("margin-top","30px")))},e.prototype._elementToInsertAfter=function(t){var e;if(e=this._listElements(),Tutsplus.adsEnabled)return e.eq(t)},e.prototype._adPlacementListCount=function(){return Math.floor(this._listElements().length/2)-1},e.prototype._numberOfListElements=function(){return this._listElements().length},e.prototype._listElements=function(){return this.$("li")},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.StickyAd=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.initialize=function(){var t,e,n;if(t=this.$(".sticky-ad"),this.onDesktop()&&0<t.length)return n=this.$(".sticky-ad-target"),e=this.$el,new Tether({element:t[0],target:n[0],attachment:"top left",targetAttachment:"top left",constraints:[{to:"window",pin:["top"]},{to:e[0],pin:["bottom"]},{to:n[0],pin:["top"]}]})},e.prototype.onDesktop=function(){if(window.matchMedia)return window.matchMedia("(min-width: 1024px)").matches},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.URLSelector=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.events={change:"selectionChanged"},e.prototype.selectionChanged=function(){return document.location=this.$("option:selected").data("url")},e}(Backbone.View)}.call(this),function(){var n=function(t,e){function n(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;window.PostBody=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return n(e,t),e.prototype.AD_HEADING_COUNT_THRESHOLD=3,e.prototype.AD_PLACEMENT_HEADING_COUNT=3,e.prototype.AD_CONTENT_SPACE_PARAGRAPH_COUNT_THRESHOULD=2,e.prototype.CONTENT_SPACE_AD_PLACEMENT_HEADING_COUNT=2,e.prototype.AD_HEADING_COUNT_THRESHOLD_MOBILE=6,e.prototype.AD_PLACEMENT_HEADING_COUNT_MOBILE=6,e.prototype.initialize=function(){var t,e,n;if(this._$contentSpaceAdContainer=$(".post__content_space_info"),0<this._$contentSpaceAdContainer.length&&(this._$contentSpaceAdContainer.hide(),t=this._$contentSpaceAdContainer.attr("data-content-space"),e=this._$contentSpaceAdContainer.attr("data-post-lang"),n=this._$contentSpaceAdContainer.attr("data-topic"),this._shouldInsertContentSpaceAdIntoBody(this.CONTENT_SPACE_AD_PLACEMENT_HEADING_COUNT)&&this._loadContentSpaceAds({id:t,lang:e,topic:n})),this._insertMobileHeaderAdIntoBody(),this._shouldInsertAdIntoBody(this.AD_HEADING_COUNT_THRESHOLD)&&this._insertAdIntoBody(),this._shouldInsertAdIntoBody(this.AD_HEADING_COUNT_THRESHOLD_MOBILE)&&this._insertAdIntoMobileBody(),this._bodyContainsMath())return this._loadMathjax()},e.prototype._insertContentSpaceAd=function(t){return this._$contentSpaceAdContainer.html(t),this._contentSpaceAdToInsertBefore(this.CONTENT_SPACE_AD_PLACEMENT_HEADING_COUNT).before(this._$contentSpaceAdContainer.show().css("margin-top","30px").css("margin-bottom","30px"))},e.prototype._insertMobileHeaderAdIntoBody=function(){var t;return t=$(".post__inarticle-ad-template-mobile"),this._elementToInsertBeforeParagraph(this.AD_PLACEMENT_PARAGRAPH_COUNT).before(t.show().css("margin-top","30px"))},e.prototype._insertAdIntoBody=function(){var t;return t=$(".post__inarticle-ad-template"),this._elementToInsertBefore(this.AD_PLACEMENT_HEADING_COUNT).before(t.show().css("margin-top","30px")),t=$(".post__inarticle-ad-1-template-mobile"),this._elementToInsertBefore(this.AD_PLACEMENT_HEADING_COUNT).before(t.show().css("margin-top","30px"))},e.prototype._insertAdIntoMobileBody=function(){var t;return t=$(".post__inarticle-ad-2-template-mobile"),this._elementToInsertBefore(this.AD_PLACEMENT_HEADING_COUNT_MOBILE).before(t.show().css("margin-top","30px"))},e.prototype._elementToInsertBefore=function(t){var e;if(e=this._headingElements(),Tutsplus.adsEnabled)return e.eq(t-1)},e.prototype._elementToInsertBeforeParagraph=function(t){return this._paragraphElements().eq(t-1)},e.prototype._shouldInsertAdIntoBody=function(t){if(Tutsplus.adsEnabled)return this._numberOfHeadingElements()>=t},e.prototype._shouldInsertContentSpaceAdIntoBody=function(t){return this._numberOfH2HeadingElements()>=t},e.prototype._contentSpaceAdToInsertBefore=function(t){return this._headingH2Elements().eq(t-1)},e.prototype._numberOfParagraphElement=function(){return this._paragraphElements().length},e.prototype._numberOfHeadingElements=function(){return this._headingElements().length},e.prototype._numberOfH2HeadingElements=function(){return this._headingH2Elements().length},e.prototype._headingElements=function(){return this.$("h2, h3")},e.prototype._paragraphElements=function(){return this.$("p")},e.prototype._headingH2Elements=function(){return this.$("h2")},e.prototype._bodyContainsMath=function(){return!!this.$(".post-body__content").html().match(/\\\[/)},e.prototype._loadMathjax=function(){var t;return(t=document.createElement("script")).src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML",document.body.appendChild(t)},e.prototype._loadContentSpaceAds=function(t){return $.ajax({url:this._ajaxUrl(),type:"post",dataType:"html",data:{_method:"GET",content_space_id:t.id,post_lang:t.lang,topic:t.topic},complete:_.bind(this._loadContentSpaceAdSuccess,this),error:_.bind(this._loadContentSpaceAdFail,this)})},e.prototype._loadContentSpaceAdFail=function(){return this._$contentSpaceAdContainer.remove()},e.prototype._loadContentSpaceAdSuccess=function(t,e){return"success"!==e?this._$contentSpaceAdContainer.remove():this._shouldInsertContentSpaceAdIntoBody(this.AD_CONTENT_SPACE_PARAGRAPH_COUNT_THRESHOULD)?this._insertContentSpaceAd(t.responseText):void 0},e.prototype._ajaxUrl=function(){return"/promotions/content_space_promotion"},e}(Backbone.View)}.call(this),function(){}.call(this);